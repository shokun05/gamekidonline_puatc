<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>à¸§à¸´à¸—à¸¢à¸²à¸¥à¸±à¸¢à¹€à¸—à¸„à¸™à¸´à¸„à¸›à¸±à¸§ Kids Play â€” à¹€à¸§à¹‡à¸šà¹€à¸à¸¡à¹€à¸”à¹‡à¸à¸­à¸™à¸¸à¸šà¸²à¸¥ âœ¨ğŸˆ</title>
  <meta name="description" content="à¹€à¸§à¹‡à¸šà¹€à¸¥à¹ˆà¸™à¹€à¸à¸¡à¸ªà¸³à¸«à¸£à¸±à¸šà¹€à¸”à¹‡à¸à¸­à¸™à¸¸à¸šà¸²à¸¥: à¸ à¸²à¸à¹ƒà¸«à¸à¹ˆ à¸à¸”à¸‡à¹ˆà¸²à¸¢ à¸ªà¸µà¸ªà¸šà¸²à¸¢à¸•à¸² à¸à¸£à¹‰à¸­à¸¡à¸šà¸±à¸™à¸—à¸¶à¸à¸œà¸¥à¸‡à¸²à¸™à¹€à¸›à¹‡à¸™ PDF/JPG" />

  <!-- à¹„à¸¥à¸šà¸£à¸²à¸£à¸µà¸ªà¸³à¸«à¸£à¸±à¸šà¸šà¸±à¸™à¸—à¸¶à¸à¸œà¸¥à¸‡à¸²à¸™à¹€à¸›à¹‡à¸™ PDF/JPG (à¸à¸±à¹ˆà¸‡à¸œà¸¹à¹‰à¹ƒà¸Šà¹‰) -->
  <script defer src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
  <script defer src="https://cdn.jsdelivr.net/npm/jspdf@2.5.1/dist/jspdf.umd.min.js"></script>

  <style>
    :root{
      --bg: #f7fbff;
      --card: #ffffff;
      --ink: #1b1f23;
      --soft-ink:#4b5563;
      --brand:#4f46e5;
      --brand-2:#22c55e;
      --accent:#fde68a;
      --selected:#4b5563;
      --correct:#22c55e;
      --wrong:#ef4444;
      --shadow: 0 10px 20px rgba(0,0,0,.06), 0 2px 6px rgba(0,0,0,.05);
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; background:var(--bg); color:var(--ink);
      font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Noto Sans Thai", "Noto Sans", Ubuntu, Cantarell, "Helvetica Neue", Arial, sans-serif;
      line-height:1.45; -webkit-font-smoothing:antialiased; text-rendering:optimizeLegibility;
    }
    header{
      position:sticky; top:0; z-index:20; backdrop-filter: blur(6px);
      background:rgba(247,251,255,.85); border-bottom:1px solid #e5e7eb;
    }
    .container{max-width:1200px; margin:0 auto; padding:16px;}
    .topbar{display:flex; align-items:center; gap:12px; justify-content:space-between}
    .brand{display:flex; align-items:center; gap:10px}
    .logo{width:42px; height:42px; border-radius:12px; background:linear-gradient(135deg,var(--brand),#7c3aed); box-shadow:var(--shadow);}
    .brand h1{font-size:20px; margin:0}
    .child-name{
      display:flex; align-items:center; gap:8px; background:var(--card); border:1px solid #e5e7eb; border-radius:14px; padding:8px 12px; box-shadow:var(--shadow);
    }
    .child-name input{border:0; outline:0; font-size:16px; width:180px}
    .btn{
      appearance:none; border:0; cursor:pointer; padding:12px 16px; border-radius:16px; font-weight:700; box-shadow:var(--shadow);
      background:var(--brand); color:white; font-size:16px; transition:transform .05s ease;
    }
    .btn:active{transform:translateY(1px)}
    .btn.secondary{background:#0ea5e9}
    .btn.ghost{background:var(--card); color:var(--ink); border:1px solid #e5e7eb}

    /* âœ… à¹€à¸à¸´à¹ˆà¸¡: à¸›à¸¸à¹ˆà¸¡à¸–à¸±à¸”à¹„à¸›à¹ƒà¸«à¸à¹ˆà¸‚à¸¶à¹‰à¸™ (à¸‚à¹‰à¸­ 2) */
    .btn.next-big{
      padding:18px 26px;        /* à¹ƒà¸«à¸à¹ˆà¸‚à¸¶à¹‰à¸™ */
      font-size:20px;           /* à¸•à¸±à¸§à¹ƒà¸«à¸à¹ˆà¸‚à¸¶à¹‰à¸™ */
      border-radius:22px;
    }
    /* âœ… à¹€à¸à¸´à¹ˆà¸¡: à¸›à¸¸à¹ˆà¸¡à¸Ÿà¸±à¸‡à¸„à¸³à¸–à¸²à¸¡ (à¸‚à¹‰à¸­ 3) */
    .btn.tts{
      background:#22c55e;
    }
    .btn.tts.ghost{
      background:var(--card);
      border:2px dashed #86efac;
      color:#065f46;
    }

    /* à¸«à¸¡à¸§à¸”à¸£à¸§à¸¡à¹€à¸à¸¡ */
    .games-grid{
      display:grid; gap:14px; grid-template-columns: repeat(2, minmax(140px,1fr));
    }
    @media (min-width:600px){ .games-grid{ grid-template-columns: repeat(3, minmax(160px,1fr)); } }
    @media (min-width:900px){ .games-grid{ grid-template-columns: repeat(5, minmax(180px,1fr)); } }

    .game-card{
      display:block; background:var(--card); border-radius:22px; overflow:hidden; text-decoration:none; color:inherit; box-shadow:var(--shadow); border:1px solid #eef2f7;
    }
    .game-thumb{ aspect-ratio: 16/12; display:flex; align-items:center; justify-content:center; font-size:76px; }
    .game-card img{width:100%; height:100%; object-fit:contain; padding:12px}
    .game-meta{padding:12px 14px;}
    .game-title{font-size:18px; font-weight:800; margin:0 0 6px}
    .game-desc{margin:0; color:var(--soft-ink); font-size:14px}

    /* à¸«à¸™à¹‰à¸²à¸ˆà¸­à¹€à¸à¸¡ */
    .screen{display:none}
    .screen.active{display:block}
    .game-wrap{background:var(--card); border-radius:26px; padding:16px; box-shadow:var(--shadow); border:1px solid #eef2f7}

    .crumbs{display:flex; align-items:center; gap:10px; margin-bottom:10px}
    .crumbs a{color:#2563eb; text-decoration:none; font-weight:700}

    .progress{
      display:flex; align-items:center; justify-content:space-between; gap:10px; margin:10px 0 18px;
    }
    .bar{flex:1; height:14px; background:#e5e7eb; border-radius:999px; overflow:hidden}
    .bar > span{display:block; height:100%; width:0%; background:linear-gradient(90deg,var(--brand),#06b6d4);}

    .question{font-size:26px; font-weight:900; margin:6px 0 8px}
    /* âœ… à¹€à¸à¸´à¹ˆà¸¡: à¹à¸–à¸§à¸›à¸¸à¹ˆà¸¡à¹ƒà¸•à¹‰à¸„à¸³à¸–à¸²à¸¡ */
    .q-actions{ display:flex; gap:10px; align-items:center; flex-wrap:wrap; margin:6px 0 14px; }

    .options{display:grid; grid-template-columns:1fr 1fr; gap:14px}
    .option{
      position:relative; border:4px solid transparent; border-radius:24px; background:#f9fafb; cursor:pointer; overflow:hidden; user-select:none; outline:none;
      box-shadow:var(--shadow);
    }
    .option:focus-visible{outline:4px solid #60a5fa}
    .option.selected{border-color:var(--selected)}
    .option img.opt-img{width:100%; height:100%; object-fit:contain; background:white; aspect-ratio:1/1}
    .option footer{display:flex; align-items:center; justify-content:space-between; padding:8px 12px; background:white;}
    .option .name{font-size:18px; font-weight:800}
    .sound-btn{border:0; background:#10b981; color:white; font-weight:800; padding:10px 12px; border-radius:12px; cursor:pointer}

    /* à¸•à¸´à¹Šà¸à¸–à¸¹à¸/à¸à¸²à¸à¸šà¸²à¸— à¸«à¸¥à¸±à¸‡à¹€à¸‰à¸¥à¸¢ */
    .mark{
      position:absolute; inset:auto 8px 8px auto; width:56px; height:56px; border-radius:50%; display:none; align-items:center; justify-content:center;
      background:white; box-shadow:var(--shadow); border:4px solid var(--correct); color:var(--correct); font-size:30px; font-weight:900;
    }
    .option.correct .mark{ display:flex }
    .option.wrong .mark{ display:flex; border-color:var(--wrong); color:var(--wrong) }

    .actions{display:flex; gap:10px; margin-top:12px; flex-wrap:wrap}

    .result{
      margin-top:18px; padding:16px; border-radius:22px; background:linear-gradient(180deg,#f0f9ff,#ccfbf1); border:1px solid #bae6fd; box-shadow:var(--shadow);
    }

    /* à¹ƒà¸šà¸›à¸£à¸°à¸à¸²à¸¨ */
    .certificate{
      width: 100%; max-width: 900px; margin: 0 auto; background:white; border-radius:30px; box-shadow:var(--shadow);
      padding:28px; border:6px solid var(--accent); text-align:center;
    }
    .certificate h3{font-size:28px; margin:0 0 12px}
    .certificate .name{font-size:34px; font-weight:900}
    .certificate .score{font-size:22px; margin-top:6px}
    .cert-row{display:flex; justify-content:center; gap:18px; flex-wrap:wrap; margin-top:16px}

    .muted{color:var(--soft-ink)}
    .hidden{display:none !important}

    /* à¹€à¸à¸¡à¸ªà¸µ */
    .color-box{width:100%; aspect-ratio:1/1;}
    .option.color .name{font-size:20px}

    /* âœ… à¹€à¸à¸´à¹ˆà¸¡: à¹à¸•à¹ˆà¸‡à¸­à¸´à¹‚à¸¡à¸ˆà¸´à¹ƒà¸«à¹‰à¸«à¸±à¸§à¸‚à¹‰à¸­à¸«à¸™à¹‰à¸²à¹à¸£à¸ */
    .emoji-title::after{
      content:"  ğŸ‰ğŸŒˆğŸ¯";
    }
  </style>
</head>
<body>
  <header>
    <div class="container topbar">
      <div class="brand">
        <img class="logo" src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcR3wohI4eredJb2xRKso_61n5c00o733XwKMA&s" alt="à¹‚à¸¥à¹‚à¸à¹‰">
        <h1>à¸§à¸´à¸—à¸¢à¸²à¸¥à¸±à¸¢à¹€à¸—à¸„à¸™à¸´à¸„à¸›à¸±à¸§ Kids Game Play</h1>
      </div>
      <div class="child-name" aria-label="à¸•à¸±à¹‰à¸‡à¸Šà¸·à¹ˆà¸­à¸™à¸±à¸à¹€à¸£à¸µà¸¢à¸™">
        <span>ğŸ‘¶ à¸Šà¸·à¹ˆà¸­à¹€à¸”à¹‡à¸:</span>
        <input id="childName" type="text" inputmode="text" placeholder="à¸à¸´à¸¡à¸à¹Œà¸Šà¸·à¹ˆà¸­à¸—à¸µà¹ˆà¸™à¸µà¹ˆ" aria-label="à¸Šà¸·à¹ˆà¸­à¹€à¸”à¹‡à¸" />
        <button class="btn ghost" id="saveNameBtn" title="à¸šà¸±à¸™à¸—à¸¶à¸à¸Šà¸·à¹ˆà¸­">à¸šà¸±à¸™à¸—à¸¶à¸</button>
      </div>
    </div>
  </header>

  <main class="container">
    <!-- à¸«à¸™à¹‰à¸²à¸£à¸§à¸¡à¹€à¸à¸¡ -->
    <section id="screen-home" class="screen active" aria-label="à¸«à¸™à¹‰à¸²à¹€à¸¥à¸·à¸­à¸à¹€à¸à¸¡">
      <h2 class="emoji-title" style="margin:10px 0 14px">à¹€à¸¥à¸·à¸­à¸à¹€à¸à¸¡à¸—à¸µà¹ˆà¸­à¸¢à¸²à¸à¹€à¸¥à¹ˆà¸™</h2>
      <div class="games-grid" id="gamesGrid"></div>
      <p class="muted" style="margin-top:10px">à¹€à¸¥à¸·à¸­à¸à¹€à¸¥à¹ˆà¸™à¹€à¸à¸¡à¹„à¸”à¹‰à¹€à¸•à¹‡à¸¡à¸—à¸µà¹ˆà¹€à¸¥à¸¢à¸„à¸£à¸±à¸š!!! ğŸ®ğŸ’¥</p>
    </section>

    <!-- à¸«à¸™à¹‰à¸²à¸ˆà¸­à¹€à¸à¸¡: à¹€à¸¥à¸·à¸­à¸à¸ à¸²à¸à¸—à¸µà¹ˆà¸–à¸¹à¸à¸•à¹‰à¸­à¸‡ -->
    <section id="screen-find" class="screen" aria-label="à¹€à¸à¸¡à¹€à¸¥à¸·à¸­à¸à¸ à¸²à¸à¸—à¸µà¹ˆà¸–à¸¹à¸à¸•à¹‰à¸­à¸‡">
      <nav class="crumbs">
        <a href="#" class="backHome">â† à¸à¸¥à¸±à¸šà¸«à¸™à¹‰à¸²à¹à¸£à¸</a>
        <span class="muted">/ à¹€à¸¥à¸·à¸­à¸à¸ à¸²à¸à¸—à¸µà¹ˆà¸–à¸¹à¸à¸•à¹‰à¸­à¸‡</span>
      </nav>

      <div class="game-wrap">
        <div class="progress">
          <div><strong>à¸‚à¹‰à¸­à¸—à¸µà¹ˆ <span id="qIndex">1</span></strong> / 10</div>
          <div class="bar" aria-label="à¸„à¸§à¸²à¸¡à¸„à¸·à¸šà¸«à¸™à¹‰à¸²"><span id="qBar" style="width:0%"></span></div>
        </div>

        <div class="question" id="qText">â€¦</div>
        <!-- âœ… à¹€à¸à¸´à¹ˆà¸¡à¸›à¸¸à¹ˆà¸¡à¸Ÿà¸±à¸‡à¸„à¸³à¸–à¸²à¸¡ -->
        <div class="q-actions">
          <button class="btn tts ghost" id="qSpeakBtn">ğŸ”Š à¸Ÿà¸±à¸‡à¸„à¸³à¸–à¸²à¸¡</button>
        </div>

        <div class="options"></div>

        <div class="actions">
          <button class="btn" id="submitBtn" disabled>à¸ªà¹ˆà¸‡à¸„à¸³à¸•à¸­à¸š âœ…</button>
          <!-- âœ… à¹€à¸à¸´à¹ˆà¸¡ class next-big à¹ƒà¸«à¹‰à¸›à¸¸à¹ˆà¸¡à¸–à¸±à¸”à¹„à¸› (à¸‚à¹‰à¸­ 2) -->
          <button class="btn ghost next-big hidden" id="skipWaitBtn">ğŸ‘‰ à¸–à¸±à¸”à¹„à¸›à¸—à¸±à¸™à¸—à¸µ</button>
        </div>

        <div id="feedback" class="muted" style="margin-top:6px"></div>

        <div id="finishBlock" class="result hidden">
          <div class="certificate" id="certificate-find">
            <h3>ğŸ‰ à¹€à¸à¹ˆà¸‡à¸¡à¸²à¸à¹€à¸¥à¸¢! ğŸ…</h3>
            <div class="name" id="certName">à¸Šà¸·à¹ˆà¸­à¹€à¸”à¹‡à¸</div>
            <div class="score" id="certScore">à¸„à¸°à¹à¸™à¸™: 0/10</div>
            <div class="muted" id="certDate">à¸§à¸±à¸™à¸—à¸µà¹ˆ</div>
            <div class="cert-row" style="margin-top:16px">
              <div style="font-size:56px">ğŸ†</div>
              <div style="font-size:56px">ğŸ“</div>
              <div style="font-size:56px">ğŸŒˆ</div>
              <div style="font-size:56px">ğŸ¥³</div>
            </div>
          </div>
          <div class="cert-row">
            <button class="btn secondary" id="dlPdf-find">à¸”à¸²à¸§à¸™à¹Œà¹‚à¸«à¸¥à¸”à¹€à¸›à¹‡à¸™ PDF ğŸ§¾</button>
            <button class="btn ghost" id="dlJpg-find">à¸”à¸²à¸§à¸™à¹Œà¹‚à¸«à¸¥à¸”à¹€à¸›à¹‡à¸™ JPG ğŸ–¼ï¸</button>
            <button class="btn" id="playAgain">à¹€à¸¥à¹ˆà¸™à¸­à¸µà¸à¸„à¸£à¸±à¹‰à¸‡ ğŸ”</button>
            <button class="btn ghost backHome">à¸à¸¥à¸±à¸šà¸«à¸™à¹‰à¸²à¹à¸£à¸ ğŸ </button>
          </div>
        </div>
      </div>
    </section>

    <!-- à¸«à¸™à¹‰à¸²à¸ˆà¸­à¹€à¸à¸¡: à¹€à¸¥à¸·à¸­à¸à¸ªà¸µ -->
    <section id="screen-color" class="screen" aria-label="à¹€à¸à¸¡à¹€à¸¥à¸·à¸­à¸à¸ªà¸µà¸—à¸µà¹ˆà¸–à¸¹à¸à¸•à¹‰à¸­à¸‡">
      <nav class="crumbs">
        <a href="#" class="backHome">â† à¸à¸¥à¸±à¸šà¸«à¸™à¹‰à¸²à¹à¸£à¸</a>
        <span class="muted">/ à¹€à¸¥à¸·à¸­à¸à¸ªà¸µà¸—à¸µà¹ˆà¸–à¸¹à¸à¸•à¹‰à¸­à¸‡</span>
      </nav>

      <div class="game-wrap">
        <div class="progress">
          <div><strong>à¸‚à¹‰à¸­à¸—à¸µà¹ˆ <span id="qIndex-color">1</span></strong> / 10</div>
          <div class="bar" aria-label="à¸„à¸§à¸²à¸¡à¸„à¸·à¸šà¸«à¸™à¹‰à¸²"><span id="qBar-color" style="width:0%"></span></div>
        </div>

        <div class="question" id="qText-color">â€¦</div>
        <!-- âœ… à¹€à¸à¸´à¹ˆà¸¡à¸›à¸¸à¹ˆà¸¡à¸Ÿà¸±à¸‡à¸„à¸³à¸–à¸²à¸¡ -->
        <div class="q-actions">
          <button class="btn tts ghost" id="qSpeakBtn-color">ğŸ”Š à¸Ÿà¸±à¸‡à¸„à¸³à¸–à¸²à¸¡</button>
        </div>

        <div class="options" id="options-color"></div>

        <div class="actions">
          <button class="btn" id="submitBtn-color" disabled>à¸ªà¹ˆà¸‡à¸„à¸³à¸•à¸­à¸š âœ…</button>
          <button class="btn ghost next-big hidden" id="skipWaitBtn-color">ğŸ‘‰ à¸–à¸±à¸”à¹„à¸›à¸—à¸±à¸™à¸—à¸µ</button>
        </div>

        <div id="feedback-color" class="muted" style="margin-top:6px"></div>

        <div id="finishBlock-color" class="result hidden">
          <div class="certificate" id="certificate-color">
            <h3>ğŸ‰ à¹€à¸à¹ˆà¸‡à¸¡à¸²à¸à¹€à¸¥à¸¢! ğŸ¨</h3>
            <div class="name" id="certName-color">à¸Šà¸·à¹ˆà¸­à¹€à¸”à¹‡à¸</div>
            <div class="score" id="certScore-color">à¸„à¸°à¹à¸™à¸™: 0/10</div>
            <div class="muted" id="certDate-color">à¸§à¸±à¸™à¸—à¸µà¹ˆ</div>
            <div class="cert-row" style="margin-top:16px">
              <div style="font-size:56px">ğŸ†</div>
              <div style="font-size:56px">ğŸ¨</div>
              <div style="font-size:56px">ğŸŒˆ</div>
              <div style="font-size:56px">âœ¨</div>
            </div>
          </div>
          <div class="cert-row">
            <button class="btn secondary" id="dlPdf-color">à¸”à¸²à¸§à¸™à¹Œà¹‚à¸«à¸¥à¸”à¹€à¸›à¹‡à¸™ PDF ğŸ§¾</button>
            <button class="btn ghost" id="dlJpg-color">à¸”à¸²à¸§à¸™à¹Œà¹‚à¸«à¸¥à¸”à¹€à¸›à¹‡à¸™ JPG ğŸ–¼ï¸</button>
            <button class="btn" id="playAgain-color">à¹€à¸¥à¹ˆà¸™à¸­à¸µà¸à¸„à¸£à¸±à¹‰à¸‡ ğŸ”</button>
            <button class="btn ghost backHome">à¸à¸¥à¸±à¸šà¸«à¸™à¹‰à¸²à¹à¸£à¸ ğŸ </button>
          </div>
        </div>
      </div>
    </section>

    <!-- à¸«à¸™à¹‰à¸²à¸ˆà¸­à¹€à¸à¸¡: à¹€à¸¥à¸·à¸­à¸à¸„à¸³à¸•à¸­à¸šà¸•à¸²à¸¡à¸«à¸¡à¸§à¸” -->
    <section id="screen-quiz" class="screen" aria-label="à¹€à¸à¸¡à¹€à¸¥à¸·à¸­à¸à¸„à¸³à¸•à¸­à¸šà¸—à¸µà¹ˆà¸–à¸¹à¸à¸•à¹‰à¸­à¸‡">
      <nav class="crumbs">
        <a href="#" class="backHome">â† à¸à¸¥à¸±à¸šà¸«à¸™à¹‰à¸²à¹à¸£à¸</a>
        <span class="muted">/ à¹€à¸¥à¸·à¸­à¸à¸„à¸³à¸•à¸­à¸šà¸—à¸µà¹ˆà¸–à¸¹à¸à¸•à¹‰à¸­à¸‡</span>
      </nav>

      <div class="game-wrap">
        <div class="progress">
          <div><strong>à¸‚à¹‰à¸­à¸—à¸µà¹ˆ <span id="qIndex-quiz">1</span></strong> / 10</div>
          <div class="bar" aria-label="à¸„à¸§à¸²à¸¡à¸„à¸·à¸šà¸«à¸™à¹‰à¸²"><span id="qBar-quiz" style="width:0%"></span></div>
        </div>

        <div class="question" id="qText-quiz">â€¦</div>
        <!-- âœ… à¹€à¸à¸´à¹ˆà¸¡à¸›à¸¸à¹ˆà¸¡à¸Ÿà¸±à¸‡à¸„à¸³à¸–à¸²à¸¡ -->
        <div class="q-actions">
          <button class="btn tts ghost" id="qSpeakBtn-quiz">ğŸ”Š à¸Ÿà¸±à¸‡à¸„à¸³à¸–à¸²à¸¡</button>
        </div>

        <div class="options" id="options-quiz"></div>

        <div class="actions">
          <button class="btn" id="submitBtn-quiz" disabled>à¸ªà¹ˆà¸‡à¸„à¸³à¸•à¸­à¸š âœ…</button>
          <button class="btn ghost next-big hidden" id="skipWaitBtn-quiz">ğŸ‘‰ à¸–à¸±à¸”à¹„à¸›à¸—à¸±à¸™à¸—à¸µ</button>
        </div>

        <div id="feedback-quiz" class="muted" style="margin-top:6px"></div>

        <div id="finishBlock-quiz" class="result hidden">
          <div class="certificate" id="certificate-quiz">
            <h3>ğŸ‰ à¹€à¸à¹ˆà¸‡à¸¡à¸²à¸à¹€à¸¥à¸¢! â“ğŸŒ¿</h3>
            <div class="name" id="certName-quiz">à¸Šà¸·à¹ˆà¸­à¹€à¸”à¹‡à¸</div>
            <div class="score" id="certScore-quiz">à¸„à¸°à¹à¸™à¸™: 0/10</div>
            <div class="muted" id="certDate-quiz">à¸§à¸±à¸™à¸—à¸µà¹ˆ</div>
            <div class="cert-row" style="margin-top:16px">
              <div style="font-size:56px">ğŸ†</div>
              <div style="font-size:56px">â“</div>
              <div style="font-size:56px">ğŸŒ¿</div>
              <div style="font-size:56px">ğŸ¯</div>
            </div>
          </div>
          <div class="cert-row">
            <button class="btn secondary" id="dlPdf-quiz">à¸”à¸²à¸§à¸™à¹Œà¹‚à¸«à¸¥à¸”à¹€à¸›à¹‡à¸™ PDF ğŸ§¾</button>
            <button class="btn ghost" id="dlJpg-quiz">à¸”à¸²à¸§à¸™à¹Œà¹‚à¸«à¸¥à¸”à¹€à¸›à¹‡à¸™ JPG ğŸ–¼ï¸</button>
            <button class="btn" id="playAgain-quiz">à¹€à¸¥à¹ˆà¸™à¸­à¸µà¸à¸„à¸£à¸±à¹‰à¸‡ ğŸ”</button>
            <button class="btn ghost backHome">à¸à¸¥à¸±à¸šà¸«à¸™à¹‰à¸²à¹à¸£à¸ ğŸ </button>
          </div>
        </div>
      </div>
    </section>

    <!-- à¸«à¸™à¹‰à¸²à¸ˆà¸­à¹€à¸à¸¡: à¸Šà¸µà¸§à¸´à¸•à¸›à¸£à¸°à¸ˆà¸³à¸§à¸±à¸™ -->
    <section id="screen-life" class="screen" aria-label="à¹€à¸à¸¡à¸Šà¸µà¸§à¸´à¸•à¸›à¸£à¸°à¸ˆà¸³à¸§à¸±à¸™">
      <nav class="crumbs">
        <a href="#" class="backHome">â† à¸à¸¥à¸±à¸šà¸«à¸™à¹‰à¸²à¹à¸£à¸</a>
        <span class="muted">/ à¸Šà¸µà¸§à¸´à¸•à¸›à¸£à¸°à¸ˆà¸³à¸§à¸±à¸™</span>
      </nav>

      <div class="game-wrap">
        <div class="progress">
          <div><strong>à¸‚à¹‰à¸­à¸—à¸µà¹ˆ <span id="qIndex-life">1</span></strong> / 10</div>
          <div class="bar" aria-label="à¸„à¸§à¸²à¸¡à¸„à¸·à¸šà¸«à¸™à¹‰à¸²"><span id="qBar-life" style="width:0%"></span></div>
        </div>

        <div class="question" id="qText-life">â€¦</div>
        <!-- âœ… à¹€à¸à¸´à¹ˆà¸¡à¸›à¸¸à¹ˆà¸¡à¸Ÿà¸±à¸‡à¸„à¸³à¸–à¸²à¸¡ -->
        <div class="q-actions">
          <button class="btn tts ghost" id="qSpeakBtn-life">ğŸ”Š à¸Ÿà¸±à¸‡à¸„à¸³à¸–à¸²à¸¡</button>
        </div>

        <div class="options" id="options-life"></div>

        <div class="actions">
          <button class="btn" id="submitBtn-life" disabled>à¸ªà¹ˆà¸‡à¸„à¸³à¸•à¸­à¸š âœ…</button>
          <button class="btn ghost next-big hidden" id="skipWaitBtn-life">ğŸ‘‰ à¸–à¸±à¸”à¹„à¸›à¸—à¸±à¸™à¸—à¸µ</button>
        </div>

        <div id="feedback-life" class="muted" style="margin-top:6px"></div>

        <div id="finishBlock-life" class="result hidden">
          <div class="certificate" id="certificate-life">
            <h3>ğŸ‰ à¹€à¸à¹ˆà¸‡à¸¡à¸²à¸à¹€à¸¥à¸¢! ğŸš—ğŸ</h3>
            <div class="name" id="certName-life">à¸Šà¸·à¹ˆà¸­à¹€à¸”à¹‡à¸</div>
            <div class="score" id="certScore-life">à¸„à¸°à¹à¸™à¸™: 0/10</div>
            <div class="muted" id="certDate-life">à¸§à¸±à¸™à¸—à¸µà¹ˆ</div>
            <div class="cert-row" style="margin-top:16px">
              <div style="font-size:56px">ğŸ†</div>
              <div style="font-size:56px">ğŸš—</div>
              <div style="font-size:56px">ğŸ</div>
              <div style="font-size:56px">ğŸŒŸ</div>
            </div>
          </div>
          <div class="cert-row">
            <button class="btn secondary" id="dlPdf-life">à¸”à¸²à¸§à¸™à¹Œà¹‚à¸«à¸¥à¸”à¹€à¸›à¹‡à¸™ PDF ğŸ§¾</button>
            <button class="btn ghost" id="dlJpg-life">à¸”à¸²à¸§à¸™à¹Œà¹‚à¸«à¸¥à¸”à¹€à¸›à¹‡à¸™ JPG ğŸ–¼ï¸</button>
            <button class="btn" id="playAgain-life">à¹€à¸¥à¹ˆà¸™à¸­à¸µà¸à¸„à¸£à¸±à¹‰à¸‡ ğŸ”</button>
            <button class="btn ghost backHome">à¸à¸¥à¸±à¸šà¸«à¸™à¹‰à¸²à¹à¸£à¸ ğŸ </button>
          </div>
        </div>
      </div>
    </section>
  </main>

  <script>
    // ==========================
    // ğŸ”§ à¸•à¸±à¹‰à¸‡à¸„à¹ˆà¸²à¹à¸¥à¸°à¹‚à¸„à¸£à¸‡à¸ªà¸£à¹‰à¸²à¸‡à¹€à¸à¸¡ (à¸«à¸™à¹‰à¸²à¹à¸£à¸)
    // ==========================
    const games = [
      { id: 'find',  title: 'à¹€à¸¥à¸·à¸­à¸à¸ à¸²à¸à¸—à¸µà¹ˆà¸–à¸¹à¸à¸•à¹‰à¸­à¸‡ ğŸ¾', desc: 'à¸¥à¸­à¸‡à¹€à¸¥à¹ˆà¸™à¸”à¸¹à¸ªà¸´à¸„à¸£à¸±à¸šà¸ªà¸™à¸¸à¸à¹à¸™à¹ˆà¸™à¸­à¸™ ğŸ‰', icon: 'https://cdn.discordapp.com/attachments/1402316480573607999/1409176784498462831/image.png?ex=68ac6da6&is=68ab1c26&hm=557c64769da92d4f9dcd96f43e98dbc608f7d8822bb43157c759bc600d204c42' },
      { id: 'color', title: 'à¹€à¸¥à¸·à¸­à¸à¸ªà¸µà¸—à¸µà¹ˆà¸–à¸¹à¸à¸•à¹‰à¸­à¸‡ ğŸŒˆ',  desc: 'à¸¥à¸­à¸‡à¹€à¸¥à¹ˆà¸™à¸”à¸¹à¸ªà¸´à¸„à¸£à¸±à¸šà¸ªà¸™à¸¸à¸à¹à¸™à¹ˆà¸™à¸­à¸™ ğŸ¨', icon: 'https://cdn.jsdelivr.net/gh/twitter/twemoji@14.0.2/assets/svg/1f308.svg' },
      { id: 'quiz',  title: 'à¹€à¸¥à¸·à¸­à¸à¸„à¸³à¸•à¸­à¸šà¸—à¸µà¹ˆà¸–à¸¹à¸à¸•à¹‰à¸­à¸‡ âœï¸', desc: 'à¸¥à¸­à¸‡à¹€à¸¥à¹ˆà¸™à¸”à¸¹à¸ªà¸´à¸„à¸£à¸±à¸šà¸ªà¸™à¸¸à¸à¹à¸™à¹ˆà¸™à¸­à¸™ ğŸ¤”', icon: 'https://cdn.jsdelivr.net/gh/twitter/twemoji@14.0.2/assets/svg/2753.svg' },
      { id: 'life',  title: 'à¸Šà¸µà¸§à¸´à¸•à¸›à¸£à¸°à¸ˆà¸³à¸§à¸±à¸™ ğŸš—ğŸ', desc: 'à¸¥à¸­à¸‡à¹€à¸¥à¹ˆà¸™à¸”à¸¹à¸ªà¸´à¸„à¸£à¸±à¸šà¸ªà¸™à¸¸à¸à¹à¸™à¹ˆà¸™à¸­à¸™ ğŸ§©', icon: 'https://cdn.jsdelivr.net/gh/twitter/twemoji@14.0.2/assets/svg/1f3c3.svg' }
    ];

    const gamesGrid = document.getElementById('gamesGrid');
    games.forEach(g => {
      const a = document.createElement('a');
      a.href = '#'; a.className = 'game-card'; a.dataset.game = g.id;
      a.innerHTML = `
        <div class="game-thumb"><img alt="${g.title}" src="${g.icon}"></div>
        <div class="game-meta">
          <div class="game-title">${g.title}</div>
          <p class="game-desc">${g.desc}</p>
        </div>
      `;
      a.addEventListener('click', (e)=>{ e.preventDefault(); openGame(g.id); });
      gamesGrid.appendChild(a);
    });

    const backHomeLinks = document.querySelectorAll('.backHome');
    backHomeLinks.forEach(el => el.addEventListener('click', (e)=>{ e.preventDefault(); showScreen('home'); }));

    function showScreen(which){
      document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
      document.getElementById('screen-'+which).classList.add('active');
      window.scrollTo({top:0,behavior:'smooth'});
    }
    function openGame(id){
      if(id==='find')  startFindGame();
      if(id==='color') startColorGame();
      if(id==='quiz')  startQuizGame();
      if(id==='life')  startLifeGame();
    }

    // ==============================
    // ğŸ”Š à¹€à¸ªà¸µà¸¢à¸‡à¸à¸¹à¸” (à¸ªà¸³à¸£à¸­à¸‡à¹€à¸¡à¸·à¹ˆà¸­à¹„à¸¡à¹ˆà¸¡à¸µà¹„à¸Ÿà¸¥à¹Œà¹€à¸ªà¸µà¸¢à¸‡à¸ªà¸±à¸•à¸§à¹Œ)
    // âœ… à¸­à¸±à¸›à¹€à¸à¸£à¸”: à¸à¸¢à¸²à¸¢à¸²à¸¡à¹€à¸¥à¸·à¸­à¸à¹€à¸ªà¸µà¸¢à¸‡à¸—à¸µà¹ˆà¸Šà¸·à¹ˆà¸­à¸¡à¸µ 'Siri' à¸à¹ˆà¸­à¸™ (à¸–à¹‰à¸²à¸¡à¸µà¹ƒà¸™à¸­à¸¸à¸›à¸à¸£à¸“à¹Œ)
    // ==============================
    function speakThai(text){
      try{
        const u = new SpeechSynthesisUtterance(text);
        const voices = speechSynthesis.getVoices();
        // à¹€à¸£à¸µà¸¢à¸‡à¸¥à¸³à¸”à¸±à¸šà¸„à¸§à¸²à¸¡à¸ªà¸³à¸„à¸±à¸: Siri(Thai) > Thai > à¸­à¸°à¹„à¸£à¸à¹‡à¹„à¸”à¹‰
        const siri = voices.find(v => /siri/i.test(v.name) && /th|Thai/i.test(v.lang));
        const th   = voices.find(v => /th|Thai/i.test(v.lang));
        u.voice = siri || th || voices[0];
        u.rate = 0.95; u.pitch = 1.0; u.volume = 1.0;
        speechSynthesis.cancel();
        speechSynthesis.speak(u);
      }catch(err){ console.warn('speech failed', err); }
    }
    window.speechSynthesis && (speechSynthesis.onvoiceschanged = ()=>{});

    // ğŸµ à¹€à¸„à¸£à¸·à¹ˆà¸­à¸‡à¹€à¸¥à¹ˆà¸™à¹€à¸ªà¸µà¸¢à¸‡à¸ªà¸±à¸•à¸§à¹Œ
    const audioPlayer = new Audio();
    audioPlayer.preload = 'auto';

    // âœ… à¸¢à¸¹à¸—à¸´à¸¥à¸´à¸•à¸µà¹‰ Twemoji
    const twemojiBase = 'https://cdn.jsdelivr.net/gh/twitter/twemoji@14.0.2/assets/svg/';
    const tw = hex => `${twemojiBase}${hex}.svg`;

    // âœ… à¸£à¸²à¸¢à¸Šà¸·à¹ˆà¸­à¸ªà¸±à¸•à¸§à¹Œ (à¸‚à¸­à¸‡à¹€à¸”à¸´à¸¡ + à¹ƒà¸Šà¹‰à¸£à¸¹à¸› URL à¸ˆà¸£à¸´à¸‡) â€” (à¹€à¸«à¸¡à¸·à¸­à¸™à¹€à¸”à¸´à¸¡)
    const ANIMALS = [
      { key:'elephant', name:'à¸Šà¹‰à¸²à¸‡', imageUrl:'https://pngfile.net/files/preview/1280x957/21565851986bbscuwaiidwdnhq8y2ealfi4js8ykwz8zw5jt3o7fdaekwggribblx66oc0joidxdw3gtjo3l69apebps8ulquytobfk6qoslhwx.png' },
      { key:'lion', name:'à¸ªà¸´à¸‡à¹‚à¸•', imageUrl:'https://img.freepik.com/free-photo/3d-animated-cartoon-lion_23-2150800715.jpg' },
      { key:'tiger', name:'à¹€à¸ªà¸·à¸­', imageUrl:'https://static.vecteezy.com/system/resources/thumbnails/049/159/624/small_2x/royal-bangle-tiger-3d-cartoon-image-png.png' },
      { key:'horse', name:'à¸¡à¹‰à¸²', imageUrl:'https://png.pngtree.com/png-vector/20241024/ourmid/pngtree-horse-cartoon-png-image_14162403.png' },
      { key:'cow', name:'à¸§à¸±à¸§', imageUrl:'https://i.pinimg.com/736x/e9/4e/53/e94e536c7dbeebdd212ac77ffb8ee945.jpg' },
      { key:'pig', name:'à¸«à¸¡à¸¹', imageUrl:'https://easydrawingguides.com/wp-content/uploads/2017/04/how-to-draw-a-cartoon-pig-featured-image-1200.png' },
      { key:'dog', name:'à¸ªà¸¸à¸™à¸±à¸‚', imageUrl:'https://png.pngtree.com/png-vector/20231017/ourmid/pngtree-cute-cartoon-happy-dog-png-file-png-image_10201723.png' },
      { key:'cat', name:'à¹à¸¡à¸§', imageUrl:'https://images.rawpixel.com/image_png_800/cHJpdmF0ZS9sci9pbWFnZXMvd2Vic2l0ZS8yMDIzLTA4L3Jhd3BpeGVsb2ZmaWNlMTVfM2RfcmVuZGVyX2NoYXJhY3Rlcl9vZl9hX2JyaXRpc2hfc2hvcnRoYWlyX2tpdF9mNThkN2U2Ny05YTk1LTQ1MjEtOGYwMy1hODM3YmQ5MWY4ZmFfMS5wbmc.png' },
      { key:'rabbit', name:'à¸à¸£à¸°à¸•à¹ˆà¸²à¸¢', imageUrl:'https://toppng.com/uploads/preview/bunny-cartoon-png-picture-freeuse-stock-rabbit-cartoo-11563091027wziigvslvq.png' },
      { key:'bear', name:'à¸«à¸¡à¸µ', imageUrl:'https://png.pngtree.com/png-vector/20240621/ourmid/pngtree-sweet-grizzly-bear-cartoon-art-for-kids-png-image_12812227.png' },
      { key:'panda', name:'à¹à¸à¸™à¸”à¹‰à¸²', imageUrl:'https://i.pinimg.com/564x/c7/30/54/c73054170fb13bbfc0db839ea8526bdf.jpg' },
      { key:'koala', name:'à¹‚à¸„à¸­à¸²à¸¥à¸²', imageUrl:'https://img.freepik.com/free-vector/cute-koala-cartoon-character_1308-132636.jpg' },
      { key:'fox', name:'à¸ªà¸¸à¸™à¸±à¸‚à¸ˆà¸´à¹‰à¸‡à¸ˆà¸­à¸', imageUrl:'https://static.vecteezy.com/system/resources/thumbnails/048/332/545/small_2x/smiling-cartoon-fox-on-transparent-background-free-png.png' },
      { key:'monkey', name:'à¸¥à¸´à¸‡', imageUrl:'https://gallery.yopriceville.com/downloadfullsize/send/9309' },
      { key:'frog', name:'à¸à¸š', imageUrl:'https://i.pinimg.com/736x/a0/5c/88/a05c883721a2397785439e4799ba2962.jpg' },
      { key:'chicken', name:'à¹„à¸à¹ˆ', imageUrl:'https://static.vecteezy.com/system/resources/thumbnails/044/315/179/small_2x/cartoon-of-a-chicken-hen-free-png.png' },
      { key:'penguin', name:'à¹€à¸à¸™à¸à¸§à¸´à¸™', imageUrl:'https://png.pngtree.com/png-vector/20240429/ourmid/pngtree-happy-penguin-cute-cartoon-art-png-image_12341225.png' },
      { key:'bird', name:'à¸™à¸', imageUrl:'https://t3.ftcdn.net/jpg/01/19/50/64/360_F_119506410_FPYY0xlKYmqV5B3nLr1o0XaVbi3weO5k.jpg' },
      { key:'duck', name:'à¹€à¸›à¹‡à¸”', imageUrl:'https://toppng.com/uploads/preview/duck-11530970651bb8llewffq.png' },
      { key:'eagle', name:'à¸™à¸à¸­à¸´à¸™à¸—à¸£à¸µ', imageUrl:'https://gallery.yopriceville.com/var/albums/Free-Clipart-Pictures/Birds-PNG/Eagle_PNG_PNG_Clip_Art_Image.png?m=1629783192' },
      { key:'owl', name:'à¸™à¸à¸®à¸¹à¸', imageUrl:'https://img.freepik.com/free-vector/cute-owl-perched-branch_1308-165797.jpg?semt=ais_hybrid&w=740&q=80' },
      { key:'boar', name:'à¸«à¸¡à¸¹à¸›à¹ˆà¸²', imageUrl:'https://img.freepik.com/free-vector/friendly-cartoon-warthog-illustration_1308-165814.jpg' },
      { key:'rhinoceros', name:'à¹à¸£à¸”', imageUrl:'https://i.pinimg.com/736x/72/8d/a2/728da2bc476d67bf7f9ddace84f690ea.jpg' },
      { key:'hippo', name:'à¸®à¸´à¸›à¹‚à¸›à¹‚à¸›à¹€à¸•à¸¡à¸±à¸ª', imageUrl:'https://img.freepik.com/free-vector/cheerful-cartoon-hippopotamus-illustration_1308-165828.jpg?semt=ais_hybrid&w=740&q=80' },
      { key:'crocodile', name:'à¸ˆà¸£à¸°à¹€à¸‚à¹‰', imageUrl:'https://i.pinimg.com/736x/08/41/90/0841904825819f295262cea0d191db4c.jpg' },
      { key:'turtle', name:'à¹€à¸•à¹ˆà¸²', imageUrl:'https://t3.ftcdn.net/jpg/02/12/04/16/360_F_212041631_IlUpamHEbdvRMmzfuXav1XORBnaIXuEf.jpg' },
      { key:'lizard', name:'à¸à¸´à¹‰à¸‡à¸à¹ˆà¸²', imageUrl:'https://png.pngtree.com/png-vector/20221223/ourmid/pngtree-little-lizard-animal-ip-element-image-vector-illustration-png-image_6493752.png' },
      { key:'snake', name:'à¸‡à¸¹', imageUrl:'https://png.pngtree.com/png-vector/20240216/ourmid/pngtree-snake-illustration-png-image_11743292.png' },
      { key:'whale', name:'à¸§à¸²à¸¬', imageUrl:'https://t4.ftcdn.net/jpg/11/41/83/01/360_F_1141830138_wkG4bn4KRbI0tGFKLqLS1EGkmoR2Cvb5.jpg' },
      { key:'dolphin', name:'à¸›à¸¥à¸²à¹‚à¸¥à¸¡à¸²', imageUrl:'https://parspng.com/wp-content/uploads/2024/03/dolphinpng.parspng.com-4.png' },
      { key:'fish', name:'à¸›à¸¥à¸²', imageUrl:'https://png.pngtree.com/png-vector/20230814/ourmid/pngtree-blue-cartoon-fish-sticker-on-a-white-background-vector-png-image_6892122.png' },
      { key:'shark', name:'à¸‰à¸¥à¸²à¸¡', imageUrl:'https://www.citypng.com/public/uploads/preview/hd-cartoon-smiling-shark-character-png-7017516948622525qd7lu90pw.png' },
      { key:'octopus', name:'à¸›à¸¥à¸²à¸«à¸¡à¸¶à¸', imageUrl:'https://static.vecteezy.com/system/resources/previews/038/265/329/non_2x/ai-generated-octopus-in-cartoon-style-on-transparent-background-free-png.png' },
      { key:'butterfly', name:'à¸œà¸µà¹€à¸ªà¸·à¹‰à¸­', imageUrl:'https://e7.pngegg.com/pngimages/389/48/png-clipart-pink-and-green-butterfly-butterfly-cartoon-cute-cartoon-butterfly-cartoon-character-child.png' },
      { key:'ladybeetle', name:'à¹€à¸•à¹ˆà¸²à¸—à¸­à¸‡', imageUrl:'https://static.vecteezy.com/system/resources/thumbnails/039/657/514/small_2x/ai-generated-cartoon-of-ladybug-transparent-background-free-png.png' },
      { key:'ant', name:'à¸¡à¸”', imageUrl:'https://parspng.com/wp-content/uploads/2024/05/antpng.parspng.com-2.png' },
      { key:'bee', name:'à¸œà¸¶à¹‰à¸‡', imageUrl:'https://img.pikbest.com/png-images/20240804/honey-bee-cartoon-character-illustration-png_10698271.png!sw800' },
      { key:'deer', name:'à¸à¸§à¸²à¸‡', imageUrl:'https://png.pngtree.com/png-vector/20220807/ourmid/pngtree-cartoon-deer-in-the-grass-png-image_5769272.png'},
    ];

    // à¹à¸œà¸™à¸—à¸µà¹ˆà¹„à¸Ÿà¸¥à¹Œà¹€à¸ªà¸µà¸¢à¸‡à¸ªà¸±à¸•à¸§à¹Œ (à¹€à¸«à¸¡à¸·à¸­à¸™à¹€à¸”à¸´à¸¡)
    const SOUND_URLS = {
      elephant:'sound/elephant.mp3', lion:'sound/lion.mp3', tiger:'sound/tiger.mp3',
      horse:'sound/horse.mp3', cow:'sound/cow.mp3', pig:'sound/pig.mp3',
      dog:'sound/dog.mp3', cat:'sound/cat.mp3', rabbit:'sound/rabbit.mp3',
      bear:'sound/bear.mp3', panda:'sound/koala.mp3', koala:'sound/koala.mp3',
      fox:'sound/fox.mp3', monkey:'sound/monkey.mp3', frog:'sound/frog.mp3',
      chicken:'sound/chicken.mp3', penguin:'sound/penguin.mp3', bird:'sound/bird.mp3',
      duck:'sound/duck.mp3', eagle:'sound/eagle.mp3', owl:'sound/owl.mp3',
      boar:'sound/boar.mp3', rhinoceros:'sound/rhinoceros.mp3', hippo:'sound/hippo.mp3',
      crocodile:'sound/crocodile.mp3', turtle:'sound/turtle.mp3', lizard:'sound/lizard.mp3',
      snake:'sound/snake.mp3', whale:'sound/whale.mp3', dolphin:'sound/dolphin.mp3',
      fish:'sound/fish.mp3', shark:'sound/shark.mp3', octopus:'sound/octopus.mp3',
      butterfly:'sound/butterfly.mp3', ladybeetle:'sound/ladybeetle.mp3', ant:'sound/ant.mp3', bee:'sound/bee.mp3'
    };

    function playAnimalSound(keyOrName){
      let key = keyOrName;
      if(!SOUND_URLS[keyOrName]){
        const found = ANIMALS.find(a=>a.name===keyOrName || a.key===keyOrName);
        key = found ? found.key : keyOrName;
      }
      const url = SOUND_URLS[key];
      if(url){
        try{
          audioPlayer.pause(); audioPlayer.currentTime = 0;
          audioPlayer.src = url;
          audioPlayer.onerror = ()=> speakThai(ANIMALS.find(a=>a.key===key)?.name || key);
          audioPlayer.play().catch(()=> speakThai(ANIMALS.find(a=>a.key===key)?.name || key));
        }catch(e){ speakThai(ANIMALS.find(a=>a.key===key)?.name || key); }
      }else{
        speakThai(ANIMALS.find(a=>a.key===key)?.name || key);
      }
    }

    function showScreen(which){ document.querySelectorAll('.screen').forEach(s => s.classList.remove('active')); document.getElementById('screen-'+which).classList.add('active'); window.scrollTo({top:0,behavior:'smooth'}); }

    // ==============================
    // ğŸ‰ à¸•à¸±à¸§à¸Šà¹ˆà¸§à¸¢à¹€à¸à¸´à¹ˆà¸¡à¸­à¸´à¹‚à¸¡à¸ˆà¸´ (à¸‚à¹‰à¸­ 1)
    // ==============================
    const EMOJIS = ["ğŸŒŸ","ğŸ‰","ğŸˆ","ğŸ¥³","ğŸŒˆ","âœ¨","ğŸ’«","ğŸ¯","ğŸ§ ","ğŸ§©","ğŸ¾","ğŸ€","ğŸš€"];
    function addEmojis(text, count=2){
      const pick = [];
      for(let i=0;i<count;i++){ pick.push(EMOJIS[Math.floor(Math.random()*EMOJIS.length)]); }
      return `${text} ${pick.join(" ")}`;
    }

    // ==============================
    // ğŸ˜ à¹€à¸à¸¡: à¹€à¸¥à¸·à¸­à¸à¸ à¸²à¸à¸—à¸µà¹ˆà¸–à¸¹à¸à¸•à¹‰à¸­à¸‡
    // ==============================
    const scrFind = document.getElementById('screen-find');
    const qText = document.getElementById('qText');
    const qIndexEl = document.getElementById('qIndex');
    const qBar = document.getElementById('qBar');
    const optionsEl = scrFind.querySelector('.options');
    const submitBtn = document.getElementById('submitBtn');
    const skipWaitBtn = document.getElementById('skipWaitBtn');
    const feedback = document.getElementById('feedback');
    const finishBlock = document.getElementById('finishBlock');
    const certName = document.getElementById('certName');
    const certScore = document.getElementById('certScore');
    const certDate = document.getElementById('certDate');
    const playAgain = document.getElementById('playAgain');
    const qSpeakBtn = document.getElementById('qSpeakBtn'); // âœ… à¸›à¸¸à¹ˆà¸¡à¸Ÿà¸±à¸‡à¸„à¸³à¸–à¸²à¸¡

    let bank = [];      // à¸„à¸¥à¸±à¸‡à¸‚à¹‰à¸­ (30 à¸‚à¹‰à¸­)
    let quiz = [];      // à¹€à¸¥à¸·à¸­à¸à¸¡à¸² 10 à¸‚à¹‰à¸­
    let qIdx = 0;       // 0..9
    let score = 0;      // à¸„à¸°à¹à¸™à¸™
    let selected = null;
    let nextTimer = null;
    let currentQuestionText = "â€¦"; // âœ… à¹€à¸à¹‡à¸šà¸‚à¹‰à¸­à¸„à¸§à¸²à¸¡à¸„à¸³à¸–à¸²à¸¡à¹à¸šà¸šà¹„à¸¡à¹ˆà¹€à¸•à¸´à¸¡à¸­à¸´à¹‚à¸¡à¸ˆà¸´

    function buildBank(){
      bank = ANIMALS.slice(0, 30).map((ani, i) => {
        let other;
        do{ other = ANIMALS[Math.floor(Math.random()*ANIMALS.length)]; } while(other.key === ani.key);
        const correctIndex = Math.random() < 0.5 ? 0 : 1;
        const left = correctIndex===0 ? ani : other;
        const right = correctIndex===1 ? ani : other;
        return {
          id: i+1,
          ask: `${ani.name}à¸„à¸·à¸­à¸•à¸±à¸§à¹„à¸«à¸™?`,
          correctIndex,
          options: [
            { name: left.name,  key: left.key,  img: left.imageUrl,  alt: `à¸£à¸¹à¸›${left.name}` },
            { name: right.name, key: right.key, img: right.imageUrl, alt: `à¸£à¸¹à¸›${right.name}` }
          ],
          correctName: ani.name
        };
      });
    }
    function pick10(){
      const arr = bank.slice();
      for(let i=arr.length-1;i>0;i--){ const j = Math.floor(Math.random()*(i+1)); [arr[i], arr[j]] = [arr[j], arr[i]]; }
      quiz = arr.slice(0,10);
    }
    function startFindGame(){
      showScreen('find');
      buildBank(); pick10();
      qIdx = 0; score = 0; selected = null;
      feedback.textContent = '';
      qBar.style.width = '0%';
      finishBlock.classList.add('hidden');
      clearTimeout(nextTimer);
      renderQuestion();
    }
    function renderQuestion(){
      const q = quiz[qIdx];
      currentQuestionText = q.ask;                     // âœ… à¹€à¸à¹‡à¸šà¸•à¹‰à¸™à¸‰à¸šà¸±à¸šà¹„à¸§à¹‰à¸ªà¸³à¸«à¸£à¸±à¸šà¸­à¹ˆà¸²à¸™
      qText.textContent = addEmojis(q.ask, 2);        // âœ… à¹à¸ªà¸”à¸‡à¸à¸£à¹‰à¸­à¸¡à¸­à¸´à¹‚à¸¡à¸ˆà¸´
      qIndexEl.textContent = (qIdx+1);
      qBar.style.width = `${(qIdx)/10*100}%`;
      optionsEl.innerHTML = '';
      selected = null; submitBtn.disabled = true; skipWaitBtn.classList.add('hidden');
      feedback.textContent='';

      q.options.forEach((opt, idx) => {
        const card = document.createElement('button');
        card.className = 'option'; card.type = 'button'; card.setAttribute('aria-pressed','false');
        card.innerHTML = `
          <img class="opt-img" data-key="${opt.key}" src="${opt.img}" alt="${opt.alt}">
          <footer>
            <span class="name">${opt.name}</span>
            <button class="sound-btn" type="button" aria-label="à¸Ÿà¸±à¸‡à¹€à¸ªà¸µà¸¢à¸‡à¸‚à¸­à¸‡ ${opt.name}">ğŸ”Š à¸Ÿà¸±à¸‡à¹€à¸ªà¸µà¸¢à¸‡</button>
          </footer>
          <div class="mark">âœ”</div>
        `;
        card.addEventListener('click', (e)=>{
          if(e.target && e.target.classList.contains('sound-btn')) return;
          [...optionsEl.children].forEach(c=>c.classList.remove('selected'));
          card.classList.add('selected');
          selected = idx; submitBtn.disabled = false; feedback.textContent='';
        });
        const imgEl = card.querySelector('.opt-img');
        imgEl.addEventListener('click', (e)=>{
          e.stopPropagation();
          [...optionsEl.children].forEach(c=>c.classList.remove('selected'));
          card.classList.add('selected');
          selected = idx; submitBtn.disabled = false; feedback.textContent='';
          playAnimalSound(opt.key);
        });
        card.querySelector('.sound-btn').addEventListener('click', (e)=>{
          e.stopPropagation();
          playAnimalSound(opt.key);
        });
        optionsEl.appendChild(card);
      });
    }
    function revealAnswer(){
      const q = quiz[qIdx];
      const cards = [...optionsEl.children];
      cards.forEach((card, idx)=>{
        const mark = card.querySelector('.mark');
        if(idx===q.correctIndex){ card.classList.add('correct'); mark.title = 'à¸–à¸¹à¸à¸•à¹‰à¸­à¸‡'; }
        else if (selected===idx){ card.classList.add('wrong'); mark.textContent = 'âœ–'; mark.title = 'à¸œà¸´à¸”'; }
      });
    }
    function submit(){
      if(selected===null) return;
      const q = quiz[qIdx];
      const correct = selected === q.correctIndex;
      if(correct) score++;
      revealAnswer();
      feedback.innerHTML = correct ? 'âœ… à¹€à¸à¹ˆà¸‡à¸¡à¸²à¸! à¸„à¸³à¸•à¸­à¸šà¸–à¸¹à¸à¸•à¹‰à¸­à¸‡ ğŸ¥³' : `âŒ à¸¢à¸±à¸‡à¹„à¸¡à¹ˆà¸–à¸¹à¸à¸™à¸° à¸•à¸±à¸§à¸—à¸µà¹ˆà¸–à¸¹à¸à¸„à¸·à¸­ â€œ${q.correctName}â€ ğŸ’¡`;
      submitBtn.disabled = true;
      skipWaitBtn.classList.remove('hidden');
      clearTimeout(nextTimer);
      nextTimer = setTimeout(nextQuestion, 5000);
    }
    function nextQuestion(){
      clearTimeout(nextTimer);
      skipWaitBtn.classList.add('hidden');
      feedback.textContent = '';
      qIdx++;
      if(qIdx < 10){ renderQuestion(); } else { finish(); }
    }
    function finish(){
      qBar.style.width = '100%';
      const name = (localStorage.getItem('childName')||'à¸™à¹‰à¸­à¸‡à¹€à¸à¹ˆà¸‡');
      certName.textContent = name;
      certScore.textContent = `à¸„à¸°à¹à¸™à¸™: ${score}/10`;
      certDate.textContent = new Date().toLocaleString('th-TH', { dateStyle:'long', timeStyle:'short' });
      finishBlock.classList.remove('hidden');
      document.getElementById('dlPdf-find').focus();
    }
    submitBtn.addEventListener('click', submit);
    skipWaitBtn.addEventListener('click', nextQuestion);
    playAgain.addEventListener('click', startFindGame);
    // âœ… à¸›à¸¸à¹ˆà¸¡à¸Ÿà¸±à¸‡à¸„à¸³à¸–à¸²à¸¡
    qSpeakBtn.addEventListener('click', ()=> speakThai(currentQuestionText));

    // ========== à¸”à¸²à¸§à¸™à¹Œà¹‚à¸«à¸¥à¸”à¹ƒà¸šà¸›à¸£à¸°à¸à¸²à¸¨ (à¹€à¸à¸¡ 1) ==========
    async function captureCertificate(elId){
      const target = document.getElementById(elId);
      const canvas = await html2canvas(target, { scale: 2, backgroundColor:'#ffffff' });
      const dataUrl = canvas.toDataURL('image/jpeg', 0.95);
      return { canvas, dataUrl };
    }
    document.getElementById('dlJpg-find').addEventListener('click', async ()=>{
      const { dataUrl } = await captureCertificate('certificate-find');
      const a = document.createElement('a'); const name = (localStorage.getItem('childName')||'à¹€à¸”à¹‡à¸à¸”à¸µ');
      a.href = dataUrl; a.download = `à¸œà¸¥à¸‡à¸²à¸™_${name}.jpg`; document.body.appendChild(a); a.click(); a.remove();
    });
    document.getElementById('dlPdf-find').addEventListener('click', async ()=>{
      const { jsPDF } = window.jspdf;
      const { canvas } = await captureCertificate('certificate-find');
      const imgData = canvas.toDataURL('image/jpeg', 0.95);
      const pdf = new jsPDF({ orientation:'landscape', unit:'pt', format:'a4' });
      const pageW = pdf.internal.pageSize.getWidth(), pageH = pdf.internal.pageSize.getHeight();
      const ratio = Math.min(pageW/canvas.width, pageH/canvas.height);
      const w = canvas.width*ratio, h = canvas.height*ratio, x=(pageW-w)/2, y=(pageH-h)/2;
      pdf.addImage(imgData, 'JPEG', x, y, w, h);
      const name = (localStorage.getItem('childName')||'à¹€à¸”à¹‡à¸à¸”à¸µ');
      pdf.save(`à¸œà¸¥à¸‡à¸²à¸™_${name}.pdf`);
    });

    // ==============================
    // ğŸ¨ à¹€à¸à¸¡: à¹€à¸¥à¸·à¸­à¸à¸ªà¸µà¸—à¸µà¹ˆà¸–à¸¹à¸à¸•à¹‰à¸­à¸‡
    // ==============================
    const COLORS = [
      {name:'à¸ªà¸µà¹à¸”à¸‡',hex:'#ef4444'},
      {name:'à¸ªà¸µà¹€à¸‚à¸µà¸¢à¸§',hex:'#22c55e'},
      {name:'à¸ªà¸µà¸™à¹‰à¸³à¹€à¸‡à¸´à¸™',hex:'#3b82f6'},
      {name:'à¸ªà¸µà¹€à¸«à¸¥à¸·à¸­à¸‡',hex:'#eab308'},
      {name:'à¸ªà¸µà¸¡à¹ˆà¸§à¸‡',hex:'#a855f7'},
      {name:'à¸ªà¸µà¸ªà¹‰à¸¡',hex:'#f97316'},
      {name:'à¸ªà¸µà¸Šà¸¡à¸à¸¹',hex:'#ec4899'},
      {name:'à¸ªà¸µà¸Ÿà¹‰à¸²',hex:'#38bdf8'},
    ];
    const qSpeakBtnColor = document.getElementById('qSpeakBtn-color'); // âœ…
    let currentQuestionTextColor = "â€¦"; // âœ…
    function startColorGame(){
      showScreen('color');
      const state = { idx:0, score:0, selected:null, quiz:[] , timer:null };
      for(let i=0;i<10;i++){
        const ans=COLORS[Math.floor(Math.random()*COLORS.length)];
        let wrong; do{wrong=COLORS[Math.floor(Math.random()*COLORS.length)]}while(wrong===ans);
        const correctIndex=Math.random()<0.5?0:1;
        const opts=correctIndex? [wrong,ans]:[ans,wrong];
        state.quiz.push({ ask:`${ans.name}à¸„à¸·à¸­à¸ªà¸µà¹„à¸«à¸™?`, correctIndex, options:opts, correctName:ans.name });
      }
      renderColor(state);
    }
    function renderColor(st){
      const q = st.quiz[st.idx];
      currentQuestionTextColor = q.ask;                               // âœ… à¹€à¸à¹‡à¸šà¸‚à¹‰à¸­à¸„à¸§à¸²à¸¡
      document.getElementById('qText-color').textContent = addEmojis(q.ask,2); // âœ… à¹à¸ªà¸”à¸‡à¸à¸£à¹‰à¸­à¸¡à¸­à¸´à¹‚à¸¡à¸ˆà¸´
      document.getElementById('qIndex-color').textContent = st.idx+1;
      document.getElementById('qBar-color').style.width = `${(st.idx)/10*100}%`;
      const box = document.getElementById('options-color');
      box.innerHTML='';
      st.selected=null;
      const submit = document.getElementById('submitBtn-color');
      const skip = document.getElementById('skipWaitBtn-color');
      const fb = document.getElementById('feedback-color');
      submit.disabled=true; skip.classList.add('hidden'); fb.textContent='';

      q.options.forEach((opt, idx)=>{
        const card=document.createElement('button');
        card.className='option color'; card.type='button';
        card.innerHTML=`
          <div class="color-box" style="background:${opt.hex}"></div>
          <footer><span class="name">${opt.name}</span></footer>
          <div class="mark">âœ”</div>
        `;
        card.addEventListener('click', ()=>{
          [...box.children].forEach(c=>c.classList.remove('selected'));
          card.classList.add('selected'); st.selected=idx; submit.disabled=false; fb.textContent='';
          speakThai(opt.name);
        });
        box.appendChild(card);
      });

      submit.onclick=()=>{
        if(st.selected==null) return;
        const correct = st.selected===q.correctIndex;
        if(correct) st.score++;
        [...box.children].forEach((c,i)=>{
          const mark=c.querySelector('.mark');
          if(i===q.correctIndex){ c.classList.add('correct'); mark.title='à¸–à¸¹à¸à¸•à¹‰à¸­à¸‡'; }
          else if(i===st.selected){ c.classList.add('wrong'); mark.textContent='âœ–'; mark.title='à¸œà¸´à¸”'; }
        });
        fb.textContent = correct ? 'âœ… à¹€à¸à¹ˆà¸‡à¸¡à¸²à¸! à¸„à¸³à¸•à¸­à¸šà¸–à¸¹à¸à¸•à¹‰à¸­à¸‡ ğŸ¥³' : `âŒ à¸¢à¸±à¸‡à¹„à¸¡à¹ˆà¸–à¸¹à¸à¸™à¸° à¸„à¸³à¸•à¸­à¸šà¸„à¸·à¸­ â€œ${q.correctName}â€ ğŸ’¡`;
        submit.disabled=true; skip.classList.remove('hidden');
        st.timer = setTimeout(()=>nextColor(st), 5000);
      };
      skip.onclick=()=>{ clearTimeout(st.timer); nextColor(st); };
      document.getElementById('playAgain-color').onclick=()=> startColorGame();
      // âœ… à¸›à¸¸à¹ˆà¸¡à¸Ÿà¸±à¸‡à¸„à¸³à¸–à¸²à¸¡
      qSpeakBtnColor.onclick = ()=> speakThai(currentQuestionTextColor);
    }
    function nextColor(st){
      st.idx++;
      if(st.idx<10) renderColor(st);
      else finishColor(st);
    }
    function finishColor(st){
      document.getElementById('qBar-color').style.width='100%';
      const name = (localStorage.getItem('childName')||'à¸™à¹‰à¸­à¸‡à¹€à¸à¹ˆà¸‡');
      document.getElementById('certName-color').textContent=name;
      document.getElementById('certScore-color').textContent=`à¸„à¸°à¹à¸™à¸™: ${st.score}/10`;
      document.getElementById('certDate-color').textContent=new Date().toLocaleString('th-TH',{dateStyle:'long', timeStyle:'short'});
      document.getElementById('finishBlock-color').classList.remove('hidden');
      document.getElementById('dlPdf-color').focus();
    }
    document.getElementById('dlJpg-color').addEventListener('click', async ()=>{
      const { dataUrl } = await captureCertificate('certificate-color');
      const a = document.createElement('a'); const name = (localStorage.getItem('childName')||'à¹€à¸”à¹‡à¸à¸”à¸µ');
      a.href = dataUrl; a.download = `à¸œà¸¥à¸‡à¸²à¸™_${name}.jpg`; document.body.appendChild(a); a.click(); a.remove();
    });
    document.getElementById('dlPdf-color').addEventListener('click', async ()=>{
      const { jsPDF } = window.jspdf;
      const { canvas } = await captureCertificate('certificate-color');
      const imgData = canvas.toDataURL('image/jpeg', 0.95);
      const pdf = new jsPDF({ orientation:'landscape', unit:'pt', format:'a4' });
      const pageW = pdf.internal.pageSize.getWidth(), pageH = pdf.internal.pageSize.getHeight();
      const ratio = Math.min(pageW/canvas.width, pageH/canvas.height);
      const w = canvas.width*ratio, h = canvas.height*ratio, x=(pageW-w)/2, y=(pageH-h)/2;
      pdf.addImage(imgData, 'JPEG', x, y, w, h);
      const name = (localStorage.getItem('childName')||'à¹€à¸”à¹‡à¸à¸”à¸µ'); pdf.save(`à¸œà¸¥à¸‡à¸²à¸™_${name}.pdf`);
    });

    // ==============================
    // â“ à¹€à¸à¸¡: à¹€à¸¥à¸·à¸­à¸à¸„à¸³à¸•à¸­à¸šà¸—à¸µà¹ˆà¸–à¸¹à¸à¸•à¹‰à¸­à¸‡ (à¸•à¸²à¸¡à¸«à¸¡à¸§à¸”)
    // ==============================
    const SETS = {
      water:      ['à¸›à¸¥à¸²','à¸›à¸¥à¸²à¹‚à¸¥à¸¡à¸²','à¸§à¸²à¸¬','à¸‰à¸¥à¸²à¸¡','à¸›à¸¥à¸²à¸«à¸¡à¸¶à¸','à¹€à¸•à¹ˆà¸²','à¸ˆà¸£à¸°à¹€à¸‚à¹‰','à¹€à¸à¸™à¸à¸§à¸´à¸™'],
      plantEater: ['à¸Šà¹‰à¸²à¸‡','à¸§à¸±à¸§','à¸¡à¹‰à¸²','à¸à¸£à¸°à¸•à¹ˆà¸²à¸¢','à¹à¸à¸™à¸”à¹‰à¸²','à¹‚à¸„à¸­à¸²à¸¥à¸²','à¸à¸§à¸²à¸‡','à¸¥à¸´à¸‡'],
      meatEater:  ['à¸ªà¸´à¸‡à¹‚à¸•','à¹€à¸ªà¸·à¸­','à¸‡à¸¹','à¸ˆà¸£à¸°à¹€à¸‚à¹‰','à¸«à¸¡à¸µ','à¹à¸£à¸”','à¸‰à¸¥à¸²à¸¡','à¸™à¸à¸­à¸´à¸™à¸—à¸£à¸µ','à¸™à¸à¸®à¸¹à¸','à¸ªà¸¸à¸™à¸±à¸‚à¸ˆà¸´à¹‰à¸‡à¸ˆà¸­à¸'],
      air:        ['à¸™à¸','à¸™à¸à¸®à¸¹à¸','à¸™à¸à¸­à¸´à¸™à¸—à¸£à¸µ','à¸œà¸µà¹€à¸ªà¸·à¹‰à¸­','à¸œà¸¶à¹‰à¸‡',],
      land:       ['à¸ªà¸¸à¸™à¸±à¸‚','à¹à¸¡à¸§','à¸¥à¸´à¸‡','à¸à¸´à¹‰à¸‡à¸à¹ˆà¸²','à¸«à¸¡à¸¹à¸›à¹ˆà¸²','à¹à¸à¸™à¸”à¹‰à¸²','à¹‚à¸„à¸­à¸²à¸¥à¸²','à¸ªà¸¸à¸™à¸±à¸‚à¸ˆà¸´à¹‰à¸‡à¸ˆà¸­à¸','à¹à¸£à¸”','à¸«à¸¡à¸µ'],
      scary:      ['à¸ªà¸´à¸‡à¹‚à¸•','à¹€à¸ªà¸·à¸­','à¸‡à¸¹','à¸ˆà¸£à¸°à¹€à¸‚à¹‰','à¸«à¸¡à¸µ','à¹à¸£à¸”','à¸‰à¸¥à¸²à¸¡','à¸œà¸¶à¹‰à¸‡'],
      domestic:   ['à¹à¸¡à¸§','à¸ªà¸¸à¸™à¸±à¸‚'],
      forest:     ['à¸«à¸¡à¸µ','à¹€à¸ªà¸·à¸­','à¸¥à¸´à¸‡','à¸Šà¹‰à¸²à¸‡','à¸à¸§à¸²à¸‡','à¸«à¸¡à¸¹à¸›à¹ˆà¸²','à¸ªà¸¸à¸™à¸±à¸‚à¸ˆà¸´à¹‰à¸‡à¸ˆà¸­à¸','à¸™à¸à¸®à¸¹à¸','à¹à¸à¸™à¸”à¹‰à¸²','à¹‚à¸„à¸­à¸²à¸¥à¸²']
    };
    const nameToAnimal = Object.fromEntries(ANIMALS.map(a=>[a.name,a]));
    const randItem = arr => arr[Math.floor(Math.random()*arr.length)];

    function buildQuizBank(){
      const items = [];
      SETS.water.forEach(n=>{
        const wrongSource = Math.random()<0.5 ? SETS.land : SETS.air;
        let wrong; do{ wrong=randItem(wrongSource); }while(SETS.water.includes(wrong));
        items.push({ ask:'à¸­à¸°à¹„à¸£à¹€à¸­à¹ˆà¸¢à¸­à¸¢à¸¹à¹ˆà¹ƒà¸™à¸™à¹‰à¸³', correct:n, wrong });
      });
      SETS.plantEater.forEach(n=>{
        let wrong; do{ wrong=randItem(SETS.meatEater); }while(wrong===n);
        items.push({ ask:'à¸­à¸°à¹„à¸£à¹€à¸­à¹ˆà¸¢à¸à¸´à¸™à¸à¸·à¸Š', correct:n, wrong });
      });
      SETS.meatEater.forEach(n=>{
        let wrong; do{ wrong=randItem(SETS.plantEater); }while(wrong===n);
        items.push({ ask:'à¸­à¸°à¹„à¸£à¹€à¸­à¹ˆà¸¢à¸à¸´à¸™à¹€à¸™à¸·à¹‰à¸­', correct:n, wrong });
      });
      SETS.air.forEach(n=>{
        const wrongSource = Math.random()<0.5 ? SETS.land : SETS.water;
        let wrong; do{ wrong=randItem(wrongSource); }while(SETS.air.includes(wrong));
        items.push({ ask:'à¸­à¸°à¹„à¸£à¹€à¸­à¹ˆà¸¢à¸­à¸¢à¸¹à¹ˆà¸šà¸™à¸—à¹‰à¸­à¸‡à¸Ÿà¹‰à¸²', correct:n, wrong });
      });
      SETS.scary.forEach(n=>{
        const all = Array.from(new Set(Object.values(SETS).flat()));
        const nonScary = all.filter(x=>!SETS.scary.includes(x));
        let wrong = randItem(nonScary);
        items.push({ ask:'à¸­à¸°à¹„à¸£à¹€à¸­à¹ˆà¸¢à¹€à¸›à¹‡à¸™à¸ªà¸±à¸•à¸§à¹Œà¸™à¹ˆà¸²à¸à¸¥à¸±à¸§', correct:n, wrong });
      });
      SETS.domestic.forEach(n=>{
        let wrong; do{ wrong=randItem(SETS.forest); }while(SETS.domestic.includes(wrong));
        items.push({ ask:'à¸­à¸°à¹„à¸£à¹€à¸­à¹ˆà¸¢à¹€à¸¥à¸µà¹‰à¸¢à¸‡à¸­à¸¢à¸¹à¹ˆà¹ƒà¸™à¸šà¹‰à¸²à¸™à¹„à¸”à¹‰', correct:n, wrong });
      });
      SETS.forest.forEach(n=>{
        const candidates = Array.from(new Set([...SETS.water, ...SETS.air, ...SETS.domestic]));
        let wrong; do{ wrong=randItem(candidates); }while(SETS.forest.includes(wrong));
        items.push({ ask:'à¸­à¸°à¹„à¸£à¹€à¸­à¹ˆà¸¢à¸­à¸¢à¸¹à¹ˆà¹ƒà¸™à¸›à¹ˆà¸²', correct:n, wrong });
      });

      // à¹à¸›à¸¥à¸‡à¹€à¸›à¹‡à¸™à¸„à¸³à¸–à¸²à¸¡à¸—à¸µà¹ˆà¸¡à¸µà¸£à¸¹à¸› (à¸ˆà¸²à¸ ANIMALS)
      const out = items.map(it=>{
        const correctIndex = Math.random()<0.5?0:1;
        const leftName = correctIndex===0 ? it.correct : it.wrong;
        const rightName= correctIndex===1 ? it.correct : it.wrong;
        const leftObj  = nameToAnimal[leftName]  ? {
          name:leftName, key:nameToAnimal[leftName].key,
          img:nameToAnimal[leftName].imageUrl, alt:`à¸£à¸¹à¸›${leftName}`
        } : { name:leftName, textOnly:true };
        const rightObj = nameToAnimal[rightName] ? {
          name:rightName, key:nameToAnimal[rightName].key,
          img:nameToAnimal[rightName].imageUrl, alt:`à¸£à¸¹à¸›${rightName}`
        } : { name:rightName, textOnly:true };
        return { ask: it.ask, correctIndex, options:[leftObj,rightObj], correctName: it.correct };
      });
      return out.sort(()=>Math.random()-0.5).slice(0,10);
    }

    const qSpeakBtnQuiz = document.getElementById('qSpeakBtn-quiz'); // âœ…
    let currentQuestionTextQuiz = "â€¦"; // âœ…

    function startQuizGame(){
      showScreen('quiz');
      document.getElementById('finishBlock-quiz').classList.add('hidden');
      document.getElementById('feedback-quiz').textContent = '';
      document.getElementById('qBar-quiz').style.width = '0%';
      const state = { idx:0, score:0, selected:null, quiz:buildQuizBank(), timer:null };
      renderQuiz(state);
    }

    function renderQuiz(st){
      const q = st.quiz[st.idx];
      const qTextEl = document.getElementById('qText-quiz');
      const qIndex = document.getElementById('qIndex-quiz');
      const qBar = document.getElementById('qBar-quiz');
      const options = document.getElementById('options-quiz');
      const submit = document.getElementById('submitBtn-quiz');
      const skip = document.getElementById('skipWaitBtn-quiz');
      const fb = document.getElementById('feedback-quiz');

      currentQuestionTextQuiz = q.ask;                       // âœ… à¹€à¸à¹‡à¸šà¸‚à¹‰à¸­à¸„à¸§à¸²à¸¡
      qTextEl.textContent = addEmojis(q.ask,2);              // âœ… à¹à¸ªà¸”à¸‡à¸à¸£à¹‰à¸­à¸¡à¸­à¸´à¹‚à¸¡à¸ˆà¸´
      qIndex.textContent = st.idx+1;
      qBar.style.width = `${(st.idx)/10*100}%`;
      options.innerHTML=''; st.selected=null; submit.disabled=true; skip.classList.add('hidden'); fb.textContent='';

      q.options.forEach((opt, idx)=>{
        const card=document.createElement('button');
        card.className='option';
        card.type='button';
        card.setAttribute('aria-pressed','false');

        card.innerHTML = opt.textOnly
          ? `<div style="display:flex;align-items:center;justify-content:center;min-height:220px;font-size:64px">ğŸ…°ï¸</div>
             <footer>
               <span class="name">${opt.name}</span>
               <span class="sound-btn" role="button" tabindex="0" aria-label="à¸Ÿà¸±à¸‡à¸„à¸³à¸§à¹ˆà¸² ${opt.name}">ğŸ”Š à¸Ÿà¸±à¸‡à¹€à¸ªà¸µà¸¢à¸‡</span>
             </footer>
             <div class="mark">âœ”</div>`
          : `<img class="opt-img" data-key="${opt.key}" src="${opt.img}" alt="${opt.alt}">
             <footer>
               <span class="name">${opt.name}</span>
               <span class="sound-btn" role="button" tabindex="0" aria-label="à¸Ÿà¸±à¸‡à¹€à¸ªà¸µà¸¢à¸‡à¸‚à¸­à¸‡ ${opt.name}">ğŸ”Š à¸Ÿà¸±à¸‡à¹€à¸ªà¸µà¸¢à¸‡</span>
             </footer>
             <div class="mark">âœ”</div>`;

        card.addEventListener('click',(e)=>{
          if(e.target && e.target.classList.contains('sound-btn')) return;
          [...options.children].forEach(c=>c.classList.remove('selected'));
          card.classList.add('selected');
          st.selected=idx;
          submit.disabled=false;
          fb.textContent='';
        });

        const soundEl = card.querySelector('.sound-btn');
        if(soundEl){
          const playSound = ()=>{ opt.textOnly ? speakThai(opt.name) : playAnimalSound(opt.key); };
          soundEl.addEventListener('click',(e)=>{ e.stopPropagation(); playSound(); });
          soundEl.addEventListener('keydown',(e)=>{
            if(e.key==='Enter' || e.key===' '){ e.preventDefault(); e.stopPropagation(); playSound(); }
          });
        }

        if(!opt.textOnly){
          const img = card.querySelector('.opt-img');
          img.addEventListener('click',(e)=>{
            e.stopPropagation();
            [...options.children].forEach(c=>c.classList.remove('selected'));
            card.classList.add('selected');
            st.selected=idx;
            submit.disabled=false;
            fb.textContent='';
            playAnimalSound(opt.key);
          });
        }else{
          card.addEventListener('dblclick', ()=> speakThai(opt.name));
        }

        options.appendChild(card);
      });

      submit.onclick=()=>{
        if(st.selected==null) return;
        const correct = st.selected===q.correctIndex;
        if(correct) st.score++;

        [...options.children].forEach((c,i)=>{
          const mark=c.querySelector('.mark');
          if(i===q.correctIndex){ c.classList.add('correct'); mark.title='à¸–à¸¹à¸à¸•à¹‰à¸­à¸‡'; }
          else if(i===st.selected){ c.classList.add('wrong'); mark.textContent='âœ–'; mark.title='à¸œà¸´à¸”'; }
        });

        fb.textContent = correct ? 'âœ… à¹€à¸à¹ˆà¸‡à¸¡à¸²à¸! à¸„à¸³à¸•à¸­à¸šà¸–à¸¹à¸à¸•à¹‰à¸­à¸‡ ğŸ¥³' : `âŒ à¸¢à¸±à¸‡à¹„à¸¡à¹ˆà¸–à¸¹à¸à¸™à¸° à¸„à¸³à¸•à¸­à¸šà¸„à¸·à¸­ â€œ${q.correctName}â€ ğŸ’¡`;
        submit.disabled=true;
        skip.classList.remove('hidden');

        clearTimeout(st.timer);
        st.timer = setTimeout(()=>nextQuiz(st), 5000);
      };

      skip.onclick=()=>{ clearTimeout(st.timer); nextQuiz(st); };
      document.getElementById('playAgain-quiz').onclick=()=> startQuizGame();

      // âœ… à¸›à¸¸à¹ˆà¸¡à¸Ÿà¸±à¸‡à¸„à¸³à¸–à¸²à¸¡
      qSpeakBtnQuiz.onclick = ()=> speakThai(currentQuestionTextQuiz);
    }

    function nextQuiz(st){
      st.idx++;
      if(st.idx < 10){
        renderQuiz(st);
      }else{
        finishQuiz(st);
      }
    }

    function finishQuiz(st){
      document.getElementById('qBar-quiz').style.width='100%';
      const name=(localStorage.getItem('childName')||'à¸™à¹‰à¸­à¸‡à¹€à¸à¹ˆà¸‡');
      document.getElementById('certName-quiz').textContent=name;
      document.getElementById('certScore-quiz').textContent=`à¸„à¸°à¹à¸™à¸™: ${st.score}/10`;
      document.getElementById('certDate-quiz').textContent=new Date().toLocaleString('th-TH',{dateStyle:'long', timeStyle:'short'});
      document.getElementById('finishBlock-quiz').classList.remove('hidden');
      document.getElementById('dlPdf-quiz').focus();
    }

    document.getElementById('dlJpg-quiz').addEventListener('click', async ()=>{
      const { dataUrl } = await captureCertificate('certificate-quiz');
      const a = document.createElement('a'); const name = (localStorage.getItem('childName')||'à¹€à¸”à¹‡à¸à¸”à¸µ');
      a.href = dataUrl; a.download = `à¸œà¸¥à¸‡à¸²à¸™_${name}.jpg`; document.body.appendChild(a); a.click(); a.remove();
    });
    document.getElementById('dlPdf-quiz').addEventListener('click', async ()=>{
      const { jsPDF } = window.jspdf;
      const { canvas } = await captureCertificate('certificate-quiz');
      const imgData = canvas.toDataURL('image/jpeg', 0.95);
      const pdf = new jsPDF({ orientation:'landscape', unit:'pt', format:'a4' });
      const pageW = pdf.internal.pageSize.getWidth(), pageH = pdf.internal.pageSize.getHeight();
      const ratio = Math.min(pageW/canvas.width, pageH/canvas.height);
      const w = canvas.width*ratio, h = canvas.height*ratio, x=(pageW-w)/2, y=(pageH-h)/2;
      pdf.addImage(imgData, 'JPEG', x, y, w, h);
      const name = (localStorage.getItem('childName')||'à¹€à¸”à¹‡à¸à¸”à¸µ'); pdf.save(`à¸œà¸¥à¸‡à¸²à¸™_${name}.pdf`);
    });

    // ==============================
    // ğŸš— à¹€à¸à¸¡: à¸Šà¸µà¸§à¸´à¸•à¸›à¸£à¸°à¸ˆà¸³à¸§à¸±à¸™
    // ==============================

    const LIFE_BANK = [
      {ask:'à¸­à¸°à¹„à¸£à¹€à¸­à¹ˆà¸¢à¸‚à¸±à¸šà¸‚à¸µà¹ˆà¸šà¸™à¸—à¹‰à¸­à¸‡à¸–à¸™à¸™', correct:'à¸£à¸–', wrong:'à¹€à¸£à¸·à¸­'},
      {ask:'à¸­à¸°à¹„à¸£à¹€à¸­à¹ˆà¸¢à¸¡à¸µà¸ªà¸­à¸‡à¸¥à¹‰à¸­à¸§à¸´à¹ˆà¸‡à¸šà¸™à¸–à¸™à¸™', correct:'à¸ˆà¸±à¸à¸£à¸¢à¸²à¸™à¸¢à¸™à¸•à¹Œ', wrong:'à¸”à¸´à¸™à¸ªà¸­'},
      {ask:'à¸­à¸°à¹„à¸£à¹€à¸­à¹ˆà¸¢à¸§à¸´à¹ˆà¸‡à¸šà¸™à¸£à¸²à¸‡à¹ƒà¸™à¹€à¸¡à¸·à¸­à¸‡', correct:'à¸£à¸–à¹„à¸Ÿ', wrong:'à¹€à¸„à¸£à¸·à¹ˆà¸­à¸‡à¸šà¸´à¸™'},
      {ask:'à¸­à¸°à¹„à¸£à¹€à¸­à¹ˆà¸¢à¸ªà¹ˆà¸‡à¸‚à¸­à¸‡à¸šà¸™à¸–à¸™à¸™', correct:'à¸£à¸–à¸šà¸£à¸£à¸—à¸¸à¸', wrong:'à¸‚à¹‰à¸²à¸§'},
      {ask:'à¸­à¸°à¹„à¸£à¹€à¸­à¹ˆà¸¢à¸¡à¸µà¸‚à¸™à¸²à¸”à¹ƒà¸«à¸à¹ˆà¸à¸§à¹ˆà¸²à¸£à¸–à¸ˆà¸±à¸à¸£à¸¢à¸²à¸™à¸¢à¸™à¸•à¹Œà¸§à¸´à¹ˆà¸‡à¸šà¸™à¸—à¹‰à¸­à¸‡à¸–à¸™à¸™', correct:'à¸£à¸–à¸¢à¸™à¸•à¹Œ', wrong:'à¹€à¸£à¸·à¸­'},
      {ask:'à¸­à¸°à¹„à¸£à¹€à¸­à¹ˆà¸¢à¸šà¸´à¸™à¸­à¸¢à¸¹à¹ˆà¸šà¸™à¸—à¹‰à¸­à¸‡à¸Ÿà¹‰à¸²', correct:'à¹€à¸„à¸£à¸·à¹ˆà¸­à¸‡à¸šà¸´à¸™', wrong:'à¸à¸¥à¹‰à¸§à¸¢'},
      {ask:'à¸­à¸°à¹„à¸£à¹€à¸­à¹ˆà¸¢à¸šà¸´à¸™à¹„à¸”à¹‰à¹€à¸«à¸¡à¸·à¸­à¸™à¸™à¸', correct:'à¹€à¸®à¸¥à¸´à¸„à¸­à¸›à¹€à¸•à¸­à¸£à¹Œ', wrong:'à¸™à¸¡'},
      {ask:'à¸­à¸°à¹„à¸£à¹€à¸­à¹ˆà¸¢à¸¥à¸­à¸¢à¹„à¸”à¹‰à¸šà¸™à¸—à¹‰à¸­à¸‡à¸Ÿà¹‰à¸²', correct:'à¸¥à¸¹à¸à¹‚à¸›à¹ˆà¸‡', wrong:'à¸œà¸±à¸à¸à¸²à¸”'},
      {ask:'à¸­à¸°à¹„à¸£à¹€à¸­à¹ˆà¸¢à¸Šà¹ˆà¸§à¸¢à¸à¸¢à¸¸à¸‡à¸¥à¸­à¸¢à¸Ÿà¹‰à¸²', correct:'à¸£à¹ˆà¸¡à¸Šà¸¹à¸Šà¸µà¸', wrong:'à¸«à¹ˆà¸§à¸‡à¸¢à¸²à¸‡'},
      {ask:'à¸­à¸°à¹„à¸£à¹€à¸­à¹ˆà¸¢à¸£à¹ˆà¸¡à¸ªà¸µà¸ªà¸§à¸¢à¸¥à¸­à¸¢à¸Ÿà¹‰à¸²', correct:'à¸£à¹ˆà¸¡à¸£à¹ˆà¸­à¸™', wrong:'à¸ªà¸²à¸£à¸à¸´à¸©'},
      {ask:'à¸­à¸°à¹„à¸£à¹€à¸­à¹ˆà¸¢à¹à¸¥à¹ˆà¸™à¹ƒà¸™à¸™à¹‰à¸³', correct:'à¹€à¸£à¸·à¸­', wrong:'à¸™à¹‰à¸³à¹à¸‚à¹‡à¸‡à¹ƒà¸ª'},
      {ask:'à¸­à¸°à¹„à¸£à¹€à¸­à¹ˆà¸¢à¹à¸¥à¹ˆà¸™à¹ƒà¸™à¹à¸¡à¹ˆà¸™à¹‰à¸³', correct:'à¹€à¸£à¸·à¸­à¸¢à¸™à¸•à¹Œ', wrong:'à¸‚à¸™à¸¡à¸›à¸±à¸‡'},
      {ask:'à¸­à¸°à¹„à¸£à¹€à¸­à¹ˆà¸¢à¸­à¸¢à¸¹à¹ˆà¹ƒà¸™à¸—à¸°à¹€à¸¥', correct:'à¸›à¸¥à¸²', wrong:'à¸Šà¹‡à¸­à¸„à¹‚à¸à¹à¸¥à¸•'},
      {ask:'à¸­à¸°à¹„à¸£à¹€à¸­à¹ˆà¸¢à¸Šà¹ˆà¸§à¸¢à¸”à¸³à¸™à¹‰à¸³à¹„à¸”à¹‰', correct:'à¹€à¸£à¸·à¸­à¸”à¸³à¸™à¹‰à¸³', wrong:'à¹€à¸£à¸·à¸­'},
      {ask:'à¸­à¸°à¹„à¸£à¹€à¸­à¹ˆà¸¢à¸¥à¸­à¸¢à¸•à¸±à¸§à¹ƒà¸™à¸™à¹‰à¸³', correct:'à¸«à¹ˆà¸§à¸‡à¸¢à¸²à¸‡', wrong:'à¸„à¸™'},
      {ask:'à¸­à¸°à¹„à¸£à¹€à¸­à¹ˆà¸¢à¸à¸´à¸™à¹„à¸”à¹‰', correct:'à¸‚à¹‰à¸²à¸§', wrong:'à¸£à¸–'},
      {ask:'à¸­à¸°à¹„à¸£à¹€à¸­à¹ˆà¸¢à¸à¸´à¸™à¹„à¸”à¹‰à¸•à¸­à¸™à¹€à¸Šà¹‰à¸²', correct:'à¸‚à¸™à¸¡à¸›à¸±à¸‡', wrong:'à¸¥à¸¹à¸à¹‚à¸›à¹ˆà¸‡'},
      {ask:'à¸­à¸°à¹„à¸£à¹€à¸­à¹ˆà¸¢à¹€à¸›à¹‡à¸™à¸œà¸¥à¹„à¸¡à¹‰', correct:'à¸à¸¥à¹‰à¸§à¸¢', wrong:'à¸”à¸´à¸™à¸ªà¸­'},
      {ask:'à¸­à¸°à¹„à¸£à¹€à¸­à¹ˆà¸¢à¹€à¸›à¹‡à¸™à¸œà¸±à¸', correct:'à¸œà¸±à¸à¸à¸²à¸”', wrong:'à¸™à¸¡'},
      {ask:'à¸­à¸°à¹„à¸£à¹€à¸­à¹ˆà¸¢à¹€à¸›à¹‡à¸™à¸‚à¸­à¸‡à¸«à¸§à¸²à¸™', correct:'à¹„à¸­à¸¨à¸„à¸£à¸µà¸¡', wrong:'à¸ªà¸²à¸£à¸à¸´à¸©'},
      {ask:'à¸­à¸°à¹„à¸£à¹€à¸­à¹ˆà¸¢à¸”à¸·à¹ˆà¸¡à¹„à¸”à¹‰', correct:'à¸™à¸¡', wrong:'à¸ªà¸šà¸¹à¹ˆ'},
      {ask:'à¸­à¸°à¹„à¸£à¹€à¸­à¹ˆà¸¢à¸à¸´à¸™à¹„à¸¡à¹ˆà¹„à¸”à¹‰', correct:'à¸à¹‰à¸­à¸™à¸­à¸´à¸', wrong:'à¸‚à¹‰à¸²à¸§'},
      {ask:'à¸­à¸°à¹„à¸£à¹€à¸­à¹ˆà¸¢à¸«à¹‰à¸²à¸¡à¸à¸´à¸™', correct:'à¸ªà¸²à¸£à¸à¸´à¸©', wrong:'à¸‚à¸™à¸¡à¸›à¸±à¸‡'},
      {ask:'à¸­à¸°à¹„à¸£à¹€à¸­à¹ˆà¸¢à¸‚à¸­à¸‡à¸«à¸§à¸²à¸™à¸ªà¸µà¹€à¸‚à¹‰à¸¡', correct:'à¸Šà¹‡à¸­à¸à¹‚à¸à¹à¸¥à¸•', wrong:'à¸”à¸´à¸™à¸ªà¸­'},
      {ask:'à¸­à¸°à¹„à¸£à¹€à¸­à¹ˆà¸¢à¹€à¸¢à¹‡à¸™à¸«à¸§à¸²à¸™à¸ªà¸µà¸ªà¸±à¸™à¸ªà¸§à¸¢', correct:'à¸™à¹‰à¸³à¹à¸‚à¹‡à¸‡à¹ƒà¸ª', wrong:'à¸œà¸±à¸à¸à¸²à¸”'},
      {ask:'à¸­à¸°à¹„à¸£à¹€à¸­à¹ˆà¸¢à¹€à¸›à¹‡à¸™à¸¡à¸™à¸¸à¸©à¸¢à¹Œ', correct:'à¸„à¸¸à¸“à¸„à¸£à¸¹', wrong:'à¸£à¸–'},
      {ask:'à¸­à¸°à¹„à¸£à¹€à¸­à¹ˆà¸¢à¹€à¸›à¹‡à¸™à¸ªà¸±à¸•à¸§à¹Œ', correct:'à¸ªà¸¸à¸™à¸±à¸‚', wrong:'à¸ˆà¸±à¸à¸£à¸¢à¸²à¸™à¸¢à¸™à¸•à¹Œ'},
      {ask:'à¸­à¸°à¹„à¸£à¹€à¸­à¹ˆà¸¢à¹€à¸”à¸´à¸™à¸ªà¸­à¸‡à¸‚à¸²', correct:'à¸„à¸™', wrong:'à¸£à¸–à¸¢à¸™à¸•à¹Œ'},
      {ask:'à¸­à¸°à¹„à¸£à¹€à¸­à¹ˆà¸¢à¸¡à¸µà¸«à¸²à¸‡', correct:'à¹à¸¡à¸§', wrong:'à¸„à¸¸à¸“à¸„à¸£à¸¹'},
      {ask:'à¸­à¸°à¹„à¸£à¹€à¸­à¹ˆà¸¢à¸ªà¹ˆà¸‡à¹€à¸ªà¸µà¸¢à¸‡à¹€à¸«à¹ˆà¸²', correct:'à¸ªà¸¸à¸™à¸±à¸‚', wrong:'à¹à¸¡à¸§'},
      {ask:'à¸­à¸°à¹„à¸£à¹€à¸­à¹ˆà¸¢à¹ƒà¸Šà¹‰à¹€à¸‚à¸µà¸¢à¸™à¸«à¸™à¸±à¸‡à¸ªà¸·à¸­', correct:'à¸”à¸´à¸™à¸ªà¸­', wrong:'à¸¢à¸²à¸‡à¸¥à¸š'},
      {ask:'à¸­à¸°à¹„à¸£à¹€à¸­à¹ˆà¸¢à¹ƒà¸Šà¹‰à¸¥à¸šà¸”à¸´à¸™à¸ªà¸­', correct:'à¸¢à¸²à¸‡à¸¥à¸š', wrong:'à¸”à¸´à¸™à¸ªà¸­'},
      {ask:'à¸­à¸°à¹„à¸£à¹€à¸­à¹ˆà¸¢à¹€à¸›à¹‡à¸™à¸à¸£à¸°à¸”à¸²à¸©à¸£à¸§à¸¡à¹€à¸¥à¹ˆà¸¡', correct:'à¸«à¸™à¸±à¸‡à¸ªà¸·à¸­', wrong:'à¸ˆà¸²à¸™'},
      {ask:'à¸­à¸°à¹„à¸£à¹€à¸­à¹ˆà¸¢à¹ƒà¸Šà¹‰à¸§à¸²à¸”à¸£à¸¹à¸›', correct:'à¸ªà¸µà¹€à¸—à¸µà¸¢à¸™', wrong:'à¹à¸à¹‰à¸§à¸™à¹‰à¸³'},
      {ask:'à¸­à¸°à¹„à¸£à¹€à¸­à¹ˆà¸¢à¹ƒà¸Šà¹‰à¸”à¸¹à¹€à¸§à¸¥à¸²', correct:'à¸™à¸²à¸¬à¸´à¸à¸²', wrong:'à¸à¸£à¸£à¹„à¸à¸£'},
      {ask:'à¸­à¸°à¹„à¸£à¹€à¸­à¹ˆà¸¢à¹„à¸§à¹‰à¹ƒà¸«à¹‰à¸™à¸±à¸à¹€à¸£à¸µà¸¢à¸™à¹„à¸›à¹€à¸£à¸µà¸¢à¸™à¸«à¸™à¸±à¸‡à¸ªà¸·à¸­', correct:'à¹‚à¸£à¸‡à¹€à¸£à¸µà¸¢à¸™', wrong:'à¹€à¸£à¸·à¸­'},
      {ask:'à¸­à¸°à¹„à¸£à¹€à¸­à¹ˆà¸¢à¸­à¸¢à¸¹à¹ˆà¹ƒà¸™à¸«à¹‰à¸­à¸‡à¹€à¸£à¸µà¸¢à¸™', correct:'à¹‚à¸•à¹Šà¸°', wrong:'à¹„à¸­à¸¨à¸„à¸£à¸µà¸¡'},
      {ask:'à¸­à¸°à¹„à¸£à¹€à¸­à¹ˆà¸¢à¹„à¸§à¹‰à¹ƒà¸Šà¹‰à¸ªà¸³à¸«à¸£à¸±à¸šà¸à¸²à¸£à¸™à¸±à¹ˆà¸‡', correct:'à¹€à¸à¹‰à¸²à¸­à¸µà¹‰', wrong:'à¹à¸à¹‰à¸§à¸™à¹‰à¸³'},
      {ask:'à¸­à¸°à¹„à¸£à¹€à¸­à¹ˆà¸¢à¹€à¸›à¸´à¸”à¹„à¸Ÿà¹„à¸”à¹‰', correct:'à¸ªà¸§à¸´à¸•à¸Šà¹Œà¹„à¸Ÿ', wrong:'à¸à¸¥à¹‰à¸§à¸¢'},
      {ask:'à¸­à¸°à¹„à¸£à¹€à¸­à¹ˆà¸¢à¹„à¸§à¹‰à¹ƒà¸Šà¹‰à¸ªà¸³à¸«à¸£à¸±à¸šà¸à¸²à¸£à¸§à¸²à¸‡à¸­à¸²à¸«à¸²à¸£', correct:'à¸ˆà¸²à¸™', wrong:'à¸à¹‰à¸­à¸™à¸­à¸´à¸'},
      {ask:'à¸­à¸°à¹„à¸£à¹€à¸­à¹ˆà¸¢à¸›à¹‰à¸­à¸‡à¸à¸±à¸™à¸¨à¸µà¸£à¸©à¸°à¹€à¸§à¸¥à¸²à¸­à¸¢à¸¹à¹ˆà¸šà¸™à¸¡à¸­à¹€à¸•à¸­à¸£à¹Œà¹„à¸‹à¸„à¹Œ', correct:'à¸«à¸¡à¸§à¸à¸à¸±à¸™à¸™à¹‡à¸­à¸„', wrong:'à¹‚à¸•à¹Šà¸°'},
      {ask:'à¸­à¸°à¹„à¸£à¹€à¸­à¹ˆà¸¢à¹ƒà¸Šà¹‰à¹€à¸›à¹‡à¸™à¸•à¸±à¸§à¸šà¸­à¸à¹ƒà¸«à¹‰à¸„à¸™à¸ªà¸²à¸¡à¸²à¸£à¸–à¸‚à¹‰à¸²à¸¡à¸–à¸™à¸™à¹„à¸”à¹‰', correct:'à¸—à¸²à¸‡à¸¡à¹‰à¸²à¸¥à¸²à¸¢', wrong:'à¹€à¸„à¸£à¸·à¹ˆà¸­à¸‡à¸šà¸´à¸™'},
      {ask:'à¸­à¸°à¹„à¸£à¹€à¸­à¹ˆà¸¢à¸ªà¹ˆà¸‡à¸ªà¸±à¸à¸à¸²à¹„à¸Ÿà¸«à¸¢à¸¸à¸”à¸£à¸–', correct:'à¹„à¸Ÿà¹à¸”à¸‡', wrong:'à¸—à¸²à¸‡à¸¡à¹‰à¸²à¸¥à¸²à¸¢'},
      {ask:'à¸­à¸°à¹„à¸£à¹€à¸­à¹ˆà¸¢à¸ªà¹ˆà¸‡à¸ªà¸±à¸à¸à¸²à¹ƒà¸«à¹‰à¸£à¸–à¹„à¸›à¹„à¸”à¹‰', correct:'à¹„à¸Ÿà¹€à¸‚à¸µà¸¢à¸§', wrong:'à¸—à¸²à¸‡à¸¡à¹‰à¸²à¸¥à¸²à¸¢'},
      {ask:'à¸­à¸°à¹„à¸£à¹€à¸­à¹ˆà¸¢à¹„à¸§à¹‰à¹€à¸•à¸·à¸­à¸™à¸­à¸±à¸™à¸•à¸£à¸²à¸¢', correct:'à¸ªà¸±à¸à¸à¸²à¸“à¹€à¸•à¸·à¸­à¸™à¸ à¸±à¸¢', wrong:'à¸—à¸²à¸‡à¸¡à¹‰à¸²à¸¥à¸²à¸¢'},
      {ask:'à¸­à¸°à¹„à¸£à¹€à¸­à¹ˆà¸¢à¸¥à¸¹à¸à¸à¸¥à¸¡à¹†à¸à¸¥à¸´à¹‰à¸‡à¹à¸¥à¹‰à¸§à¹€à¸•à¸°', correct:'à¸¥à¸¹à¸à¸Ÿà¸¸à¸•à¸šà¸­à¸¥', wrong:'à¸„à¸¸à¸“à¸„à¸£à¸¹'},
      {ask:'à¸­à¸°à¹„à¸£à¹€à¸­à¹ˆà¸¢à¸•à¸­à¸™à¸•à¸µà¸•à¹‰à¸­à¸‡à¸•à¸µà¸‚à¹‰à¸²à¸¡à¸•à¸²à¸‚à¹ˆà¸²à¸¢', correct:'à¸¥à¸¹à¸à¹à¸šà¸”à¸¡à¸´à¸™à¸•à¸±à¸™', wrong:'à¸„à¸¸à¸“à¸„à¸£à¸¹'},
      {ask:'à¸­à¸°à¹„à¸£à¹€à¸­à¹ˆà¸¢à¸•à¸µà¸¥à¸‡à¸«à¸¥à¸¸à¸¡', correct:'à¸¥à¸¹à¸à¸à¸­à¸¥à¹Œà¸Ÿ', wrong:'à¸„à¸¸à¸“à¸„à¸£à¸¹'},
      {ask:'à¸­à¸°à¹„à¸£à¹€à¸­à¹ˆà¸¢à¹ƒà¸Šà¹‰à¸­à¸­à¸à¸à¸³à¸¥à¸±à¸‡à¸à¸²à¸¢à¸à¸£à¸°à¹‚à¸”à¸”à¹€à¸Šà¸·à¸­à¸', correct:'à¹€à¸Šà¸·à¸­à¸à¸à¸£à¸°à¹‚à¸”à¸”', wrong:'à¸„à¸¸à¸“à¸„à¸£à¸¹'},
      {ask:'à¸­à¸°à¹„à¸£à¹€à¸­à¹ˆà¸¢à¸Šà¹ˆà¸§à¸¢à¸—à¸³à¸¥à¸­à¸¢à¸•à¸±à¸§à¹ƒà¸™à¸™à¹‰à¸³', correct:'à¸šà¸­à¸£à¹Œà¸”à¹‚à¸Ÿà¸¡', wrong:'à¸„à¸¸à¸“à¸„à¸£à¸¹'},
      {ask:'à¸­à¸°à¹„à¸£à¹€à¸­à¹ˆà¸¢à¸ªà¹ˆà¸­à¸‡à¹à¸ªà¸‡à¸à¸¥à¸²à¸‡à¸§à¸±à¸™', correct:'à¸”à¸§à¸‡à¸­à¸²à¸—à¸´à¸•à¸¢à¹Œ', wrong:'à¸”à¸§à¸‡à¸ˆà¸±à¸™à¸—à¸£à¹Œ'},
      {ask:'à¸­à¸°à¹„à¸£à¹€à¸­à¹ˆà¸¢à¸ªà¹ˆà¸­à¸‡à¹à¸ªà¸‡à¸à¸¥à¸²à¸‡à¸„à¸·à¸™', correct:'à¸”à¸§à¸‡à¸ˆà¸±à¸™à¸—à¸£à¹Œ', wrong:'à¸”à¸§à¸‡à¸­à¸²à¸—à¸´à¸•à¸¢à¹Œ'},
      {ask:'à¸­à¸°à¹„à¸£à¹€à¸­à¹ˆà¸¢à¸•à¸à¸ˆà¸²à¸à¸Ÿà¹‰à¸²', correct:'à¸à¸™', wrong:'à¸¥à¸¡'},
      {ask:'à¸­à¸°à¹„à¸£à¹€à¸­à¹ˆà¸¢à¸à¸±à¸”à¹ƒà¸«à¹‰à¹€à¸¢à¹‡à¸™', correct:'à¸¥à¸¡', wrong:'à¸à¸™'},
      {ask:'à¸­à¸°à¹„à¸£à¹€à¸­à¹ˆà¸¢à¸‚à¸¶à¹‰à¸™à¸ˆà¸²à¸à¸”à¸´à¸™ à¹€à¸›à¹‡à¸™à¸ªà¸µà¹€à¸‚à¸µà¸¢à¸§', correct:'à¸«à¸à¹‰à¸²', wrong:'à¸ªà¸šà¸¹à¹ˆ'},
      {ask:'à¸­à¸°à¹„à¸£à¹€à¸­à¹ˆà¸¢à¹„à¸§à¹‰à¹ƒà¸ªà¹ˆà¸™à¹‰à¸³', correct:'à¹à¸à¹‰à¸§à¸™à¹‰à¸³', wrong:'à¸Šà¹‡à¸­à¸à¹‚à¸à¹à¸¥à¸•'},
      {ask:'à¸­à¸°à¹„à¸£à¹€à¸­à¹ˆà¸¢à¹„à¸§à¹‰à¹ƒà¸ªà¹ˆà¸­à¸­à¸à¹„à¸›à¸™à¸­à¸à¸šà¹‰à¸²à¸™', correct:'à¸£à¸­à¸‡à¹€à¸—à¹‰à¸²', wrong:'à¸”à¸§à¸‡à¸­à¸²à¸—à¸´à¸•à¸¢à¹Œ'},
      {ask:'à¸­à¸°à¹„à¸£à¹€à¸­à¹ˆà¸¢à¹„à¸§à¹‰à¹ƒà¸Šà¹‰à¸—à¸³à¸„à¸§à¸²à¸¡à¸ªà¸°à¸­à¸²à¸”à¸¥à¹‰à¸²à¸‡à¸¡à¸·à¸­', correct:'à¸ªà¸šà¸¹à¹ˆ', wrong:'à¸ªà¸²à¸£à¸à¸´à¸©'},
      {ask:'à¸­à¸°à¹„à¸£à¹€à¸­à¹ˆà¸¢à¸šà¸µà¸šà¹à¸¥à¹‰à¸§à¸Ÿà¸­à¸‡', correct:'à¸¢à¸²à¸ªà¸£à¸°à¸œà¸¡', wrong:'à¸à¹‰à¸­à¸™à¸­à¸´à¸'},
      {ask:'à¸­à¸°à¹„à¸£à¹€à¸­à¹ˆà¸¢à¸–à¸·à¸­à¹„à¸§à¹‰à¸à¸±à¸™à¸à¸™à¸•à¸­à¸™à¸à¸™à¸•à¸', correct:'à¸£à¹ˆà¸¡', wrong:'à¹€à¸®à¸¥à¸´à¸„à¸­à¸›à¹€à¸•à¸­à¸£à¹Œ'},
      {ask:'à¸­à¸°à¹„à¸£à¹€à¸­à¹ˆà¸¢à¹ƒà¸Šà¹‰à¸•à¸±à¸”à¸à¸£à¸°à¸”à¸²à¸©', correct:'à¸à¸£à¸£à¹„à¸à¸£', wrong:'à¸„à¸¸à¸“à¸„à¸£à¸¹'},
      {ask:'à¸­à¸°à¹„à¸£à¹€à¸­à¹ˆà¸¢à¹„à¸§à¹‰à¹ƒà¸Šà¹‰à¹€à¸”à¸´à¸™à¸—à¸²à¸‡à¹ƒà¸™à¸—à¸µà¹ˆà¸ªà¸²à¸˜à¸£à¸²à¸£à¸“à¸°à¸£à¹ˆà¸§à¸¡à¸à¸±à¸šà¸œà¸¹à¹‰à¸­à¸·à¹ˆà¸™', correct:'à¸£à¸–à¹€à¸¡à¸¥à¹Œ', wrong:'à¹€à¸£à¸·à¸­à¸”à¸³à¸™à¹‰à¸³'},
      {ask:'à¸­à¸°à¹„à¸£à¹€à¸­à¹ˆà¸¢à¸§à¸´à¹ˆà¸‡à¹à¸‚à¹ˆà¸‡à¹ƒà¸™à¸ªà¸™à¸²à¸¡à¸§à¸´à¹ˆà¸‡', correct:'à¸™à¸±à¸à¸à¸µà¸¬à¸²', wrong:'à¹à¸¡à¸§'},
      {ask:'à¸­à¸°à¹„à¸£à¹€à¸­à¹ˆà¸¢à¹„à¸§à¹‰à¹ƒà¸Šà¹‰à¸„à¸§à¸šà¸„à¸¸à¸¡à¸—à¸´à¸¨à¸—à¸²à¸‡à¸£à¸–', correct:'à¸à¸§à¸‡à¸¡à¸²à¸¥à¸±à¸¢à¸£à¸–', wrong:'à¸Šà¹‡à¸­à¸à¹‚à¸à¹à¸¥à¸•'},
      {ask:'à¸­à¸°à¹„à¸£à¹€à¸­à¹ˆà¸¢à¹„à¸§à¹‰à¹ƒà¸Šà¹‰à¸ªà¸³à¸«à¸£à¸±à¸šà¸—à¸³à¸à¸²à¸£à¸šà¹‰à¸²à¸™', correct:'à¸ªà¸¡à¸¸à¸”', wrong:'à¸„à¸¸à¸“à¸„à¸£à¸¹'}
    ];

    const LIFE_ASSETS = {
      'à¸£à¸–': 'https://img.freepik.com/free-psd/cartoon-modern-car-illustration_23-2151227157.jpg?semt=ais_hybrid&w=740&q=80',
      'à¸£à¸–à¸¢à¸™à¸•à¹Œ': 'https://www.nicepng.com/png/detail/119-1198513_car-cartoon-png-car-cartoon.png',
      'à¸ˆà¸±à¸à¸£à¸¢à¸²à¸™à¸¢à¸™à¸•à¹Œ': 'https://img.pikbest.com/png-images/qiantu/ps-motorcycle-cartoon-cute-icon-vector_2734740.png!sw800',
      'à¸£à¸–à¹„à¸Ÿ': 'https://i.pinimg.com/736x/54/69/dc/5469dce4bf8826d5b8cb3cc0e6ed9a64.jpg',
      'à¸£à¸–à¸šà¸£à¸£à¸—à¸¸à¸': 'https://i.pinimg.com/564x/ca/82/3e/ca823e058f5be67bdd283adf48a78d03.jpg',
      'à¹€à¸„à¸£à¸·à¹ˆà¸­à¸‡à¸šà¸´à¸™': 'https://images.rawpixel.com/image_800/cHJpdmF0ZS9sci9pbWFnZXMvd2Vic2l0ZS8yMDIyLTA1L2pvYjcyOC0yMTYtdi5qcGc.jpg',
      'à¹€à¸®à¸¥à¸´à¸„à¸­à¸›à¹€à¸•à¸­à¸£à¹Œ': 'https://static.vecteezy.com/system/resources/previews/036/271/971/non_2x/ai-generated-helicopter-illustration-helicopter-cartoon-on-transparent-background-free-png.png',
      'à¸¥à¸¹à¸à¹‚à¸›à¹ˆà¸‡': 'https://www.pngmart.com/files/23/Cartoon-Balloon-PNG-File.png',
      'à¸£à¹ˆà¸¡à¸Šà¸¹à¸Šà¸µà¸': 'https://images.rawpixel.com/image_png_800/cHJpdmF0ZS9sci9pbWFnZXMvd2Vic2l0ZS8yMDI0LTEwL3Jhd3BpeGVsb2ZmaWNlN18zZF9jaGFyYWN0ZXJfaWxsdXN0cmF0aW9uX2Ffd29tZW5fYWR2ZW50dXJlX3NreV9iNTNiNWVlOC1iYTg3LTQxOTAtYmRiMy0yMGRmMWFkMzBkYTIucG5n.png',
      'à¸£à¹ˆà¸¡à¸£à¹ˆà¸­à¸™': 'https://static.vecteezy.com/system/resources/thumbnails/044/620/329/small_2x/cartoon-man-with-parachute-on-transparent-background-png.png',
      'à¹€à¸£à¸·à¸­': 'https://i.pinimg.com/736x/6d/c3/79/6dc3792181622a60cf04c512af0e78a7.jpg',
      'à¹€à¸£à¸·à¸­à¸¢à¸™à¸•à¹Œ': 'https://static.vecteezy.com/system/resources/previews/033/251/069/non_2x/speedboat-cartoon-illustration-ai-generative-free-png.png',
      'à¹€à¸£à¸·à¸­à¸”à¸³à¸™à¹‰à¸³': 'https://img.freepik.com/free-vector/submarine-underwater-cartoon-vector-icon-illustration-transportation-technology-icon-isolated_138676-5585.jpg?semt=ais_hybrid&w=740&q=80',
      'à¸«à¹ˆà¸§à¸‡à¸¢à¸²à¸‡': 'https://media.istockphoto.com/id/977434634/vector/swim-ring.jpg?s=612x612&w=0&k=20&c=aJ4tDNEqv1qnJpSODf0TTux_d49Em7haOp7Qvq1_pxM=',
      'à¸‚à¹‰à¸²à¸§': 'https://img.freepik.com/premium-vector/rice-cartoon-isolated-transparent-background-png-cartoon_927498-17149.jpg',
      'à¸‚à¸™à¸¡à¸›à¸±à¸‡': 'https://img.freepik.com/premium-vector/cartoon-vector-illustration-isolated-object-delicious-flour-food-bakery-bread-whole-grain-toast_311865-9555.jpg',
      'à¸à¸¥à¹‰à¸§à¸¢': 'https://static.vecteezy.com/system/resources/thumbnails/009/597/287/small_2x/banana-fruit-illustration-cartoon-png.png',
      'à¸œà¸±à¸à¸à¸²à¸”': 'https://i.pinimg.com/736x/4a/2e/46/4a2e46b9e13fff263271001c87a5e0ba.jpg',
      'à¹„à¸­à¸¨à¸„à¸£à¸µà¸¡': 'https://www.citypng.com/public/uploads/preview/hd-four-balls-ice-cream-cone-illustration-cartoon-png-704081694798368j5r0p8siuw.png?v=2025071504',
      'à¸™à¸¡': 'https://img.freepik.com/premium-vector/milk-cartoon-vector-illustration-cute-milk-carton-cartoon-drawing-with-glass-milk_648083-558.jpg?w=360',
      'à¸Šà¹‡à¸­à¸à¹‚à¸à¹à¸¥à¸•': 'https://static.vecteezy.com/system/resources/previews/025/775/232/non_2x/chocholate-icon-cartoon-ai-generative-free-png.png',
      'à¸™à¹‰à¸³à¹à¸‚à¹‡à¸‡à¹ƒà¸ª': 'https://thumb.ac-illust.com/de/deac3f72bab970ce251e807a3189b792_t.jpeg',
      'à¸à¹‰à¸­à¸™à¸­à¸´à¸': 'https://png.pngtree.com/png-vector/20230728/ourmid/pngtree-brick-clipart-bricks-building-construction-stock-vector-png-image_6798803.png',
      'à¸ªà¸²à¸£à¸à¸´à¸©': 'https://png.pngtree.com/png-vector/20191018/ourmid/pngtree-glass-bottle-of-green-poison-icon-cartoon-style-png-image_1823054.jpg',
      'à¸„à¸¸à¸“à¸„à¸£à¸¹': 'https://i.pinimg.com/736x/cd/92/92/cd9292e01ef5aae6ee782b34535dbad8.jpg',
      'à¸„à¸™': 'https://static.vecteezy.com/system/resources/previews/024/658/893/non_2x/conversational-3d-male-character-engaged-in-a-discussion-free-png.png',
      'à¸”à¸´à¸™à¸ªà¸­': 'https://static.vecteezy.com/system/resources/previews/045/905/724/non_2x/school-materials-clip-art-cartoon-pencil-free-png.png',
      'à¸¢à¸²à¸‡à¸¥à¸š': 'https://www.citypng.com/public/uploads/preview/clipart-cartoon-rubber-eraser-hd-png-701751694869969y9ey4bzypi.png',
      'à¸«à¸™à¸±à¸‡à¸ªà¸·à¸­': 'https://img.freepik.com/free-vector/text-books-library-isolated-icon_24877-83372.jpg',
      'à¸ªà¸µà¹€à¸—à¸µà¸¢à¸™': 'https://static.vecteezy.com/system/resources/previews/025/246/744/non_2x/school-materials-cartoon-crayons-free-png.png',
      'à¸™à¸²à¸¬à¸´à¸à¸²': 'https://img.pikbest.com/png-images/qiantu/hand-drawn-cartoon-alarm-clock-png-element_2735100.png!sw800',
      'à¹‚à¸£à¸‡à¹€à¸£à¸µà¸¢à¸™': 'https://img.freepik.com/premium-photo/png-cute-school-png-architecture-building-cartoon_53876-719335.jpg',
      'à¹‚à¸•à¹Šà¸°': 'https://static.vecteezy.com/system/resources/previews/041/956/367/non_2x/ai-generated-desk-illustration-isolated-on-transparent-background-free-png.png',
      'à¹€à¸à¹‰à¸²à¸­à¸µà¹‰': 'https://static.vecteezy.com/system/resources/previews/042/053/211/non_2x/ai-generated-wooden-chair-hand-drawn-cartoon-style-illustration-free-png.png',
      'à¸ªà¸§à¸´à¸•à¸Šà¹Œà¹„à¸Ÿ': 'https://www.shutterstock.com/image-vector/switch-vector-icon-doodle-style-600nw-2425928239.jpg',
      'à¸ˆà¸²à¸™': 'https://i.pinimg.com/originals/db/5c/0c/db5c0cdc1f32b3fd6e31a5f72ea76a51.jpg',
      'à¸«à¸¡à¸§à¸à¸à¸±à¸™à¸™à¹‡à¸­à¸„': 'https://www.freeiconspng.com/uploads/helmet-icon-22.jpg',
      'à¸—à¸²à¸‡à¸¡à¹‰à¸²à¸¥à¸²à¸¢': 'https://img.pikbest.com/png-images/qiantu/hand-drawn-cartoon-traffic-safe-crossing-the-road_2723180.png!sw800',
      'à¹„à¸Ÿà¹à¸”à¸‡': 'https://img.favpng.com/12/13/18/traffic-light-cartoon-clip-art-png-favpng-GDS97KN17D6zu3dN9EAbvdwVW.jpg',
      'à¹„à¸Ÿà¹€à¸‚à¸µà¸¢à¸§': 'https://www.nicepng.com/png/detail/92-927344_traffic-light-happy-traffic-light-green-cartoon.png',
      'à¸ªà¸±à¸à¸à¸²à¸“à¹€à¸•à¸·à¸­à¸™à¸ à¸±à¸¢': 'https://clipart-library.com/2023/1163898246376n0zzhsijkzeglijxbhyde0bgoeugzr2vth3i912vzfsbc93hahtyzp2gtewk8jm5ayzhrgxmbmvdbepskhhuwrlr6dolc03ni1.png',
      'à¸¥à¸¹à¸à¸Ÿà¸¸à¸•à¸šà¸­à¸¥': 'https://atlas-content-cdn.pixelsquid.com/stock-images/cartoon-soccer-ball-y1Mv8yA-600.jpg',
      'à¸¥à¸¹à¸à¹à¸šà¸”à¸¡à¸´à¸™à¸•à¸±à¸™': 'https://img.pikbest.com/png-images/badminton-ball-party-combination-cartoon-clipart_5882603.png!sw800',
      'à¸¥à¸¹à¸à¸à¸­à¸¥à¹Œà¸Ÿ': 'https://png.pngtree.com/png-vector/20230907/ourmid/pngtree-golf-ball-with-grass-illustration-in-minimal-style-png-image_10013870.png',
      'à¹€à¸Šà¸·à¸­à¸à¸à¸£à¸°à¹‚à¸”à¸”': 'https://static.vecteezy.com/system/resources/previews/024/655/962/non_2x/happy-kid-boy-playing-jump-rope-isolated-free-free-png.png',
      'à¸”à¸§à¸‡à¸­à¸²à¸—à¸´à¸•à¸¢à¹Œ': 'https://gallery.yopriceville.com/downloadfullsize/send/7437',
      'à¸”à¸§à¸‡à¸ˆà¸±à¸™à¸—à¸£à¹Œ': 'https://icon2.cleanpng.com/20240108/rub/transparent-cartoon-moon-glowing-crescent-moon-in-starry-serene-1710931834207.webp',
      'à¸à¸™': 'https://png.pngtree.com/png-vector/20201128/ourmid/pngtree-a-few-blue-clouds-and-rain-png-image_2478511.jpg',
      'à¸¥à¸¡': 'https://img.pikbest.com/png-images/qianku/hand-drawn-cartoon-wind_2395813.png!sw800',
      'à¸«à¸à¹‰à¸²': 'https://www.pngbie.com/assets/images/icon/Pngbie-%E0%B8%A0%E0%B8%B2%E0%B8%9E%E0%B8%9F%E0%B8%A3%E0%B8%B5-20240710222043.png',
      'à¹à¸à¹‰à¸§à¸™à¹‰à¸³': 'https://img.freepik.com/premium-vector/hand-drawn-glass-cartoon-vector-illustration-clipart-white-background_191095-38317.jpg',
      'à¸£à¸­à¸‡à¹€à¸—à¹‰à¸²': 'https://img.favpng.com/3/7/6/shoes-cartoon-png-favpng-vqjcQsPTaAzwzdh6bmFXcidtj.jpg',
      'à¸ªà¸šà¸¹à¹ˆ': 'https://cerapureth.com/wp-content/uploads/2022/11/Cerapure-kid-soap.png',
      'à¸¢à¸²à¸ªà¸£à¸°à¸œà¸¡': 'https://png.pngtree.com/png-vector/20240312/ourmid/pngtree-shampoo-cleaning-cartoon-png-image_11929621.png',
      'à¸£à¹ˆà¸¡': 'https://img.freepik.com/premium-vector/umbrella-clipart-cartoon-style-vector-illustration_761413-12337.jpg',
      'à¸à¸£à¸£à¹„à¸à¸£': 'https://img.freepik.com/premium-vector/closed-scissors-cartoon-vector-illustration-tool-cutting-handmade-needlework_893800-161.jpg',
      'à¸£à¸–à¹€à¸¡à¸¥à¹Œ': 'https://img.pikbest.com/png-images/20240821/cute-happy-yellow-school-bus-cartoon-with-children-character-on-isolated-white-background_10745832.png!sw800',
      'à¸™à¸±à¸à¸à¸µà¸¬à¸²': 'https://img.favpng.com/22/0/11/cartoon-sport-athlete-clip-art-png-favpng-3aJKinXx5u60VZzdXBxM4bhsD.jpg',
      'à¸à¸§à¸‡à¸¡à¸²à¸¥à¸±à¸¢à¸£à¸–': 'https://thumbnail.imgbin.com/4/1/2/cartoon-driver-cartoon-character-driving-a-car-N6aaGuE2_t.jpg',
      'à¸ªà¸¡à¸¸à¸”': 'https://media.istockphoto.com/id/1557600935/vector/green-notebook-and-pen-top-view.jpg?s=612x612&w=0&k=20&c=RqvN3A-mkaccXqLBvMbyyyWb7siZjXjXDDWUgemD_Sg='
    };

    function lifeOptionToObj(name){
      if(nameToAnimal[name]){
        const an = nameToAnimal[name];
        return { name, key: an.key, img: an.imageUrl, alt: `à¸£à¸¹à¸›${name}` };
      }
      if(LIFE_ASSETS[name]){
        return { name, img: LIFE_ASSETS[name], alt:`à¸£à¸¹à¸›${name}` };
      }
      return { name, textOnly:true };
    }

    const qSpeakBtnLife = document.getElementById('qSpeakBtn-life'); // âœ…
    let currentQuestionTextLife = "â€¦"; // âœ…

    function startLifeGame(){
      showScreen('life');
      const shuffled=[...LIFE_BANK].sort(()=>Math.random()-0.5).slice(0,10);
      const state = {
        idx:0, score:0, selected:null,
        quiz:shuffled.map(q=>{
          const correctIndex=Math.random()<0.5?0:1;
          const leftName  = correctIndex ? q.wrong : q.correct;
          const rightName = correctIndex ? q.correct : q.wrong;
          return {
            ask:q.ask,
            correctIndex,
            options:[ lifeOptionToObj(leftName), lifeOptionToObj(rightName) ],
            correctName:q.correct
          };
        }),
        timer:null
      };
      renderLife(state);
    }

    function renderLife(st){
      const q = st.quiz[st.idx];
      const qTextEl = document.getElementById('qText-life');
      const qIndex = document.getElementById('qIndex-life');
      const qBar = document.getElementById('qBar-life');
      const options = document.getElementById('options-life');
      const submit = document.getElementById('submitBtn-life');
      const skip = document.getElementById('skipWaitBtn-life');
      const fb = document.getElementById('feedback-life');

      currentQuestionTextLife = q.ask;                    // âœ…
      qTextEl.textContent = addEmojis(q.ask,2);           // âœ…
      qIndex.textContent = st.idx+1;
      qBar.style.width = `${(st.idx)/10*100}%`;
      options.innerHTML=''; st.selected=null; submit.disabled=true; skip.classList.add('hidden'); fb.textContent='';

      q.options.forEach((opt, idx)=>{
        const card=document.createElement('button');
        card.className='option'; card.type='button';

        card.innerHTML = opt.textOnly
          ? `
            <div style="display:flex;align-items:center;justify-content:center;min-height:220px;font-size:64px">ğŸ…°ï¸</div>
            <footer><span class="name">${opt.name}</span></footer>
            <div class="mark">âœ”</div>
          `
          : `
            <img class="opt-img" ${opt.key?`data-key="${opt.key}"`:''} src="${opt.img}" alt="${opt.alt}">
            <footer>
              <span class="name">${opt.name}</span>
              ${opt.key ? `<button class="sound-btn" type="button" aria-label="à¸Ÿà¸±à¸‡à¹€à¸ªà¸µà¸¢à¸‡à¸‚à¸­à¸‡ ${opt.name}">ğŸ”Š à¸Ÿà¸±à¸‡à¹€à¸ªà¸µà¸¢à¸‡</button>` : ''}
            </footer>
            <div class="mark">âœ”</div>
          `;

        card.addEventListener('click', (e)=>{
          if(e.target && e.target.classList.contains('sound-btn')) return;
          [...options.children].forEach(c=>c.classList.remove('selected'));
          card.classList.add('selected'); st.selected=idx; submit.disabled=false; fb.textContent='';
          speakThai(opt.name);
        });

        const imgEl = card.querySelector('.opt-img');
        if(imgEl){
          imgEl.addEventListener('click',(e)=>{
            e.stopPropagation();
            [...options.children].forEach(c=>c.classList.remove('selected'));
            card.classList.add('selected'); st.selected=idx; submit.disabled=false; fb.textContent='';
            if(opt.key) playAnimalSound(opt.key); else speakThai(opt.name);
          });
        }
        const sbtn = card.querySelector('.sound-btn');
        if(sbtn){
          sbtn.addEventListener('click',(e)=>{ e.stopPropagation(); playAnimalSound(opt.key); });
        }

        options.appendChild(card);
      });

      submit.onclick=()=>{
        if(st.selected==null) return;
        const correct = st.selected===q.correctIndex;
        if(correct) st.score++;
        [...options.children].forEach((c,i)=>{
          const mark=c.querySelector('.mark');
          if(i===q.correctIndex){ c.classList.add('correct'); mark.title='à¸–à¸¹à¸à¸•à¹‰à¸­à¸‡'; }
          else if(i===st.selected){ c.classList.add('wrong'); mark.textContent='âœ–'; mark.title='à¸œà¸´à¸”'; }
        });
        fb.textContent = correct ? 'âœ… à¹€à¸à¹ˆà¸‡à¸¡à¸²à¸! à¸„à¸³à¸•à¸­à¸šà¸–à¸¹à¸à¸•à¹‰à¸­à¸‡ ğŸ¥³' : `âŒ à¸¢à¸±à¸‡à¹„à¸¡à¹ˆà¸–à¸¹à¸à¸™à¸° à¸„à¸³à¸•à¸­à¸šà¸„à¸·à¸­ â€œ${q.correctName}â€ ğŸ’¡`;
        submit.disabled=true; skip.classList.remove('hidden');
        st.timer=setTimeout(()=>nextLife(st),5000);
      };
      skip.onclick=()=>{ clearTimeout(st.timer); nextLife(st); };
      document.getElementById('playAgain-life').onclick=()=> startLifeGame();

      // âœ… à¸›à¸¸à¹ˆà¸¡à¸Ÿà¸±à¸‡à¸„à¸³à¸–à¸²à¸¡
      qSpeakBtnLife.onclick = ()=> speakThai(currentQuestionTextLife);
    }

    function nextLife(st){
      st.idx++;
      if(st.idx<10) renderLife(st);
      else finishLife(st);
    }
    function finishLife(st){
            document.getElementById('qBar-life').style.width='100%';
      const name=(localStorage.getItem('childName')||'à¸™à¹‰à¸­à¸‡à¹€à¸à¹ˆà¸‡');
      document.getElementById('certName-life').textContent=name;
      document.getElementById('certScore-life').textContent=`à¸„à¸°à¹à¸™à¸™: ${st.score}/10`;
      document.getElementById('certDate-life').textContent=new Date().toLocaleString('th-TH',{dateStyle:'long', timeStyle:'short'});
      document.getElementById('finishBlock-life').classList.remove('hidden');
      document.getElementById('dlPdf-life').focus();
    }

    // ========== à¸”à¸²à¸§à¸™à¹Œà¹‚à¸«à¸¥à¸”à¹ƒà¸šà¸›à¸£à¸°à¸à¸²à¸¨ (à¹€à¸à¸¡ à¸Šà¸µà¸§à¸´à¸•à¸›à¸£à¸°à¸ˆà¸³à¸§à¸±à¸™) ==========
    document.getElementById('dlJpg-life').addEventListener('click', async ()=>{
      const { dataUrl } = await captureCertificate('certificate-life');
      const a = document.createElement('a'); 
      const name = (localStorage.getItem('childName')||'à¹€à¸”à¹‡à¸à¸”à¸µ');
      a.href = dataUrl; 
      a.download = `à¸œà¸¥à¸‡à¸²à¸™_${name}.jpg`; 
      document.body.appendChild(a); 
      a.click(); 
      a.remove();
    });

    document.getElementById('dlPdf-life').addEventListener('click', async ()=>{
      const { jsPDF } = window.jspdf;
      const { canvas } = await captureCertificate('certificate-life');
      const imgData = canvas.toDataURL('image/jpeg', 0.95);
      const pdf = new jsPDF({ orientation:'landscape', unit:'pt', format:'a4' });
      const pageW = pdf.internal.pageSize.getWidth(), pageH = pdf.internal.pageSize.getHeight();
      const ratio = Math.min(pageW/canvas.width, pageH/canvas.height);
      const w = canvas.width*ratio, h = canvas.height*ratio, x=(pageW-w)/2, y=(pageH-h)/2;
      pdf.addImage(imgData, 'JPEG', x, y, w, h);
      const name = (localStorage.getItem('childName')||'à¹€à¸”à¹‡à¸à¸”à¸µ'); 
      pdf.save(`à¸œà¸¥à¸‡à¸²à¸™_${name}.pdf`);
    });

    // ==============================
    // ğŸ’¾ à¸ˆà¸±à¸”à¸à¸²à¸£à¸Šà¸·à¹ˆà¸­à¹€à¸”à¹‡à¸ (à¸šà¸±à¸™à¸—à¸¶à¸/à¹‚à¸«à¸¥à¸”à¸­à¸±à¸•à¹‚à¸™à¸¡à¸±à¸•à¸´)
    // ==============================
    const nameInput = document.getElementById('childName');
    const saveNameBtn = document.getElementById('saveNameBtn');

    // à¹‚à¸«à¸¥à¸”à¸Šà¸·à¹ˆà¸­à¸—à¸µà¹ˆà¹€à¸„à¸¢à¸šà¸±à¸™à¸—à¸¶à¸à¹„à¸§à¹‰
    (function preloadName(){
      const saved = localStorage.getItem('childName') || '';
      if(saved){ nameInput.value = saved; }
    })();

    // à¸šà¸±à¸™à¸—à¸¶à¸à¸Šà¸·à¹ˆà¸­à¹€à¸¡à¸·à¹ˆà¸­à¸à¸”à¸›à¸¸à¹ˆà¸¡
    saveNameBtn.addEventListener('click', ()=>{
      const v = (nameInput.value || '').trim();
      if(!v){ alert('à¸à¸´à¸¡à¸à¹Œà¸Šà¸·à¹ˆà¸­à¸à¹ˆà¸­à¸™à¸™à¸°à¸„à¸£à¸±à¸š ğŸ˜Š'); return; }
      localStorage.setItem('childName', v);
      speakThai(`à¸šà¸±à¸™à¸—à¸¶à¸à¸Šà¸·à¹ˆà¸­ ${v} à¹à¸¥à¹‰à¸§à¸„à¸£à¸±à¸š`);
      saveNameBtn.textContent = 'à¸šà¸±à¸™à¸—à¸¶à¸à¹à¸¥à¹‰à¸§ âœ…';
      setTimeout(()=> saveNameBtn.textContent='à¸šà¸±à¸™à¸—à¸¶à¸', 1200);
    });

    // à¸šà¸±à¸™à¸—à¸¶à¸à¹€à¸¡à¸·à¹ˆà¸­à¸à¸” Enter à¹ƒà¸™à¸Šà¹ˆà¸­à¸‡à¸Šà¸·à¹ˆà¸­
    nameInput.addEventListener('keydown', (e)=>{
      if(e.key==='Enter'){ saveNameBtn.click(); }
    });

    // à¹‚à¸«à¸¥à¸”à¸«à¸™à¹‰à¸²à¹à¸£à¸à¹€à¸ªà¸¡à¸­à¹€à¸¡à¸·à¹ˆà¸­à¹€à¸£à¸´à¹ˆà¸¡ (à¸à¸±à¸™à¸ªà¸à¸£à¸­à¸¥à¸¥à¹Œà¸„à¹‰à¸²à¸‡)
    document.addEventListener('DOMContentLoaded', ()=> { showScreen('home'); });
  </script>
</body>
</html>
